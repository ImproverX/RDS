	ORG	100H	JMP	STARTSTR1:	DB 10,'Вставь исходный диск.',0STR4:	DB 10,'Вставь диск назаначения.',0STR6:	DB 10,'Конец работы.',0STER0:	DB 7,' -(ДОР./СЕКТ.) Ошибка,повторить ?(Д/Н)',0STRI0:	DB 10,'Введи начальный адрес: ',0STRI1:	DB 10,'Введи длинну файла: ',0STRI2:	DB 10,'Файл <B>as или <C>od ? ',0SNCFL:	DB 'SinclairC'BADR:	DW	0LENG:	DW	0,0	DB	0START:	LXI	SP,0	LDA	5DH	CPI	20H	JZ	EXIT	CALL	CLEAR	LXI	D,5CH	MVI	C,15	CALL	5	INR	A	JZ	EXIT	LXI	H,5DH	LXI	D,SNCFL	MVI	B,8	CALL	MEMMOV	LXI	H,STRI0	CALL	PRINT	CALL	INPUT	SHLD	BADR	LXI	H,STRI1	CALL	PRINT	CALL	INPUT	SHLD	LENG	LXI	H,STRI2	CALL	PRINTBEGIN:	CALL	KEY	CPI	'B'	JZ	BEG10	CPI	'C'	JNZ	BEGINBEG10:	STA	SNCFL+8	MOV	C,A	CALL	PRINTC	MVI	C,10	CALL	PRINTC	LXI	H,SNCFLCOPY:	SHLD	SRFILE	MVI	B,9COPY08:	MOV	C,M	INX	H	CALL	PRINTC	DCR	B	JNZ	COPY08	MOV	E,M	INX	H	MOV	D,M	INX	H	MVI	C,20H	CALL	PRINTC	CALL	PRINTD	MOV	E,M	INX	H	MOV	D,M	INX	H	CALL	PRINTD	XRA	A	STA	MKFL	STA	VSECTCOPY10:	LXI	H,STR1	CALL	PRINT	CALL	KEY	MVI	B,0	LXI	D,MADRCOPY12:	PUSH	B	PUSH	D	MVI	C,1AH	CALL	5	LXI	D,5CH	MVI	C,20	CALL	5	ANA	A	JNZ	COPY20	POP	D	LXI	H,128	DAD	D	XCHG	POP	B	DCR	B	JNZ	COPY12	MVI	A,128	CALL	COPYBL	JMP	COPY10COPY20:	POP	D	POP	B	XRA	A	SUB	B	ANA	A	JZ	COPY23	RAR	JNC	$+4	INR	A	CALL	COPYBLCOPY22:	CALL	TCLOS	LXI	H,STR6	CALL	PRINT	JMP	EXITCOPY23:	LDA	MKFL	ANA	A	JZ	EXIT	JMP	COPY22COPYBL:	STA	WSECT	STA	KSECT	LXI	H,VSECT	ADD	M	MOV	M,A	LXI	H,STR4	CALL	PRINT	CALL	KEY	LDA	MKFL	ANA	A	CZ	DPAR	LXI	H,MADR	SHLD	ADR	LDA	DSECT	STA	SECT	LDA	DTRACK	STA	TRACK	LDA	KSECT	STA	WSECT	CALL	SAVE	LDA	SECT	STA	DSECT	LDA	TRACK	STA	DTRACK	RETDPAR:	INR	A	STA	MKFL	MVI	A,9	STA	WSECT	XRA	A	STA	TRACK	MVI	A,1	STA	SECT	LXI	H,DIRT2	SHLD	ADR	CALL	MOSK	LXI	H,PARDIR	MOV	A,M	INR	A	STA	DSECT	INX	H	MOV	A,M	STA	DTRACK	RETTCLOS:	LXI	H,DIRT2	LDA	VSECT	STA	SNCFL+13	LXI	D,10HDPAR02:	MOV	A,M	ANA	A	JZ	DPAR04	DAD	D	JMP	DPAR02DPAR04:	XCHG	LHLD	SRFILE	MVI	B,14	CALL	MEMMOV	PUSH	H	LXI	H,PARDIR	MOV	A,M	MOV	B,A	STAX	D	INX	H	INX	D	MOV	A,M	MOV	C,A	STAX	D	POP	D	DCX	D	LDAX	D	MOV	E,A	ANI	0F0H	RRC	RRC	RRC	RRC	ADD	C	MOV	C,A	MOV	A,E	ANI	15	ADD	B	MOV	B,A	SUI	16	JC	$+5	MOV	B,A	INR	C	MOV	M,C	DCX	H	MOV	M,B	DCX	H	LHLD	DPSCT	MOV	A,L	SUB	E	MOV	L,A	JNC	$+4	DCR	H	SHLD	DPSCT	LXI	H,DPWFL	INR	M	LXI	H,DIRT2	SHLD	ADR	XRA	A	STA	TRACK	MVI	A,1	STA	SECT	MVI	A,9	STA	WSECT	JMP	SAVEMEMMOV:	MOV	A,M	STAX	D	INX	H	INX	D	DCR	B	JNZ	MEMMOV	RETHEX:	CALL	HEX10	RC	INX	H	RLC	RLC	RLC	RLC	MOV	C,A	CALL	HEX10	RC	INX	H	ORA	C	RETHEX10:	MOV	A,M	CPI	30H	RC	CPI	3AH	JC	HEX12	CPI	41H	RC	CPI	'G'	CMC	RC	SUI	7HEX12:	SUI	30H	ANA	A	RETDECOD:	LXI	H,80H	CALL	HEX	JC	EXIT	MOV	D,A	CALL	HEX	JC	EXIT	MOV	E,A	XCHG	RETINPUT:	LXI	H,80H	MVI	D,128INP10:	CALL	KEY	CPI	13	JZ	DECOD	CPI	3	JZ	START	CPI	8	JZ	INP20	CPI	7FH	JZ	INP20	CPI	20H	JC	INP10	MOV	M,A	INX	H	MOV	C,A	CALL	PRINTC	DCR	D	JNZ	INP10	RETINP20:	MVI	A,128	CMP	D	JZ	INP10	DCX	H	INR	D	MVI	C,8	CALL	PRINTC	MVI	C,20H	CALL	PRINTC	MVI	C,8	CALL	PRINTC	JMP	INP10MOSK:	CALL	POWER	CALL	TRANSMOSK10:	CALL	READ	LHLD	ADR	LXI	D,100H	DAD	D	SHLD	ADR	LXI	H,SECT	INR	M	MOV	A,M	CPI	17	JC	MOSK20	MVI	M,1	LXI	H,TRACK	INR	M	CALL	TRANSMOSK20:	LXI	H,WSECT	DCR	M	RZ	JMP	MOSK10SAVE:	CALL	POWER	CALL	TRANSSAVE10:	CALL	WRITE	LHLD	ADR	LXI	D,100H	DAD	D	SHLD	ADR	LXI	H,SECT	INR	M	MOV	A,M	CPI	17	JC	SAVE20	MVI	M,1	LXI	H,TRACK	INR	M	CALL	TRANSSAVE20:	LXI	H,WSECT	DCR	M	RZ	JMP	SAVE10POWER:	CALL	MOTOR	MVI	A,0D8H	JMP	KOMANDMOTOR:	LDA	REG1C	OUT	1CH	IN	1BH	RLC	RNC	JMP	MOTORKOMAND:	OUT	1BH	XRA	A	DCR	A	JNZ	$-1KOM10:	LDA	REG1C	OUT	1CH	IN	1BH	RRC	JC	KOM10	RETTRANS:	LDA	TRACK	ANA	A	RAR	STA	RTRCK	MVI	A,0	RAL	ANA	A	MVI	A,30H	JNZ	TRAN10	MVI	A,34HTRAN10:	STA	REG1C	CALL	MOTOR	LDA	RTRCK	OUT	18H	MVI	A,18H	JMP	KOMANDREAD:	MVI	A,3	STA	WREADREAD00:	DI	CALL	MOTOR	LHLD	ADR	LDA	SECT	OUT	19H	MVI	A,80H	OUT	1BHREAD10:	IN	1BH	RRC	JNC	READ10	MVI	D,3	JMP	READ12READ11:	MOV	M,A	INX	HREAD12:	IN	1BH	ANA	D	JPO	READ12	IN	18H	JNZ	READ11	CALL	ZAD	IN	1BH	ANI	0DDH	EI	RZ	LXI	H,WREAD	DCR	M	JNZ	READ00	CALL	DSERR	JZ	READ00	RETWRITE:	MVI	A,3	STA	WREADWRIT00:	DI	CALL	MOTOR	LDA	SECT	OUT	19H	LHLD	ADR	MVI	D,3	MVI	A,0A0H	OUT	1BHWRIT10:	IN	1BH	RRC	JNC	WRIT10WRIT12:	IN	1BH	ANA	D	JPO	WRIT12	MOV	A,M	OUT	18H	INX	H	JNZ	WRIT12	CALL	ZAD	IN	1BH	ANI	0DDH	EI	RZ	LXI	H,WREAD	DCR	M	JNZ	WRIT00	CALL	DSERR	JZ	WRIT00	RETDSERR:	MVI	C,10	CALL	PRINTC	IN	1AH	CALL	HEXOUT	MVI	C,20H	CALL	PRINTC	IN	19H	CALL	HEXOUT	LXI	H,STER0	CALL	PRINT	MVI	C,1	CALL	5	ANI	7FH	CPI	5FH	JC	$+5	SUI	20H	CPI	'D'	RETZAD:	MVI	A,128	DCR	A	JNZ	$-1	RETPRINT:	MOV	A,M	ANA	A	RZ	INX	H	PUSH	B	MOV	C,A	CALL	PRINTC	POP	B	JMP	PRINTKEY:	PUSH	H	PUSH	D	PUSH	BKEY10:	MVI	C,6	MVI	E,-1	CALL	5	ANA	A	JZ	KEY10	POP	B	POP	D	POP	H	RETHEXOUT:	MOV	B,A	RRC	RRC	RRC	RRC	CALL	$+4	MOV	A,B	ANI	15	CPI	10	JC	$+5	ADI	7	ADI	30H	MOV	C,A	JMP	PRINTCPRINTC:	PUSH	H	PUSH	D	PUSH	B	PUSH	PSW	MOV	E,C	MVI	C,2	CALL	5	POP	PSW	POP	B	POP	D	POP	H	RETPRINTD:	MOV	A,D	CALL	HEXOUT	MOV	A,E	CALL	HEXOUT	MVI	C,20H	JMP	PRINTCCLEAR:	LXI	H,68H	MVI	M,0	LXI	D,69H	MVI	B,18H	JMP	MEMMOVDIRT2:	EQU	700HMADR:	EQU	DIRT2+900HPARDIR:	EQU	DIRT2+8E1HDPWFL:	EQU	DIRT2+8E4HDPSCT:	EQU	DIRT2+8E5HEXIT:	EQU	0TRACK:	DB	0RTRCK:	DB	0SECT:	DB	0WSECT:	DB	0VSECT:	DB	0DSECT:	DB	0DTRACK:	DB	0KSECT:	DB	0REG1C:	DB	34HWREAD:	DB	0ADR:	DW	0SRFILE:	DW	0MKFL:	DB	0