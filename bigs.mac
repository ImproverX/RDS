	EXTRN	@LINE,@XY	GLOBAL	@BGSIZ,@BGSTR,@BGSYMFONT	EQU	0C000HPUSHA	MACRO	PUSH	H	PUSH	D	PUSH	B	PUSH	PSW	ENDMPOPA	MACRO	POP	PSW	POP	B	POP	D	POP	H	ENDM@BGSTR:	MOV	A,M	ANA	A	RZ	INX	H	PUSH	B	MOV	C,A	CALL	@BGSYM	POP	B	JMP	@BGSTR@BGSIZ:	DW	0@BGSYM:	PUSHA	MOV	L,C	MVI	H,0	DAD	H	PUSH	H	DAD	H	DAD	H	POP	D	DAD	D	LXI	D,FONT	DAD	D	DI	LDA	15	OUT	10H	LXI	D,SYMBUF	MVI	B,10	CALL	COPY	LDA	3CH	OUT	10H	EI	LHLD	@XY	PUSH	H	XCHG	LXI	B,SYMBUF+9	MVI	H,10BGSM10:	PUSH	H	PUSH	D	PUSH	B	LDAX	B	MOV	C,A	MVI	A,2BGSM12:	PUSH	PSW	PUSH	D	MVI	B,3BGSM14:	LHLD	@BGSIZ	XCHG	SHLD	@XY	PUSH	H	DAD	D	XCHG	MOV	A,C	RLC	MOV	C,A	JNC	BGSM15	PUSH	B	MOV	C,D	MOV	B,E	MVI	A,2	CALL	@LINE	POP	BBGSM15:	LHLD	@BGSIZ	POP	D	XCHG	MVI	D,0	DAD	D	DAD	D	XCHG	DCR	B	JNZ	BGSM14	POP	D	LHLD	@BGSIZ	MVI	H,0	DAD	D	XCHG	POP	PSW	DCR	A	JNZ	BGSM12	POP	B	POP	D	LHLD	@BGSIZ	MVI	L,0	DAD	D	XCHG	POP	H	DCX	B	DCR	H	JNZ	BGSM10	LHLD	@BGSIZ	POP	D	MVI	H,0	XCHG	DAD	D	DAD	D	DAD	D	DAD	D	DAD	D	DAD	D	INR	L	SHLD	@XY	POPA	RETSYMBUF:	DS	10COPY:	MOV	A,M	STAX	D	INX	H	INX	D	DCR	B	JNZ	COPY	RET