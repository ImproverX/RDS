		РДС.Руководство пользователя.

		1.Процессор консольных команд.
  Процессор консольных команд в РДС v2.00 значительно усовершенствован и рас-
ширен по сравнению с более ранними версиями.В целом он функционально более
приближен к ПКК используемому в МикроДОС,и по сравнению с последним,есть суще
ственный плюс - возможность использования настоящих BAT-файлов.

  В ПКК РДС начиная с v2.00 используются следующие встроенные команды: "ста-
рые" - REN,ERA,TYPE,SAVE,DIR,USER;и новые - TEST,REST.
  Команда TEST - тест квазидиска,аналогична команде "8" в МикроДОС.
Синтаксис: TEST [команда] , где в случае указания "команды" R будет выполнено
восстановление контрольных сумм по данным сектора.
  Примеры:
TEST
  или
TEST C:		- тестирование квази-диска

TEST R
  или
TEST C:R	- тестирование квази-диска с восстановлением

  Команда REST - сброс дисковой подсистемы.Теперь после "горячего" старта ОС,
например после нажатия 'УС+С',сброса не происходит,но тем не менее не нужно
опасаться ошибки BDOS "Disk is R/O",так как новая версия BDOS автоматически
обрабатывает эту ошибку.Это означает,что после смены диска не обязательно про
изводить сброс дисковой подсистемы.(В МикроДОС BDOS работает аналогично,но
там есть возможность потери информации в каталоге диска,в РДС же это не гро-
зит.) Команда REST введена в основном для того чтобы некоторые программы пра-
вильно воспринимали информацию о заполнености диска.

  В ПКК РДС v3.XX добавлена новая команда HDD.
Синтаксис: HDD [диск:][номер] , где номер - шестнадцатиричное число.
Диск указывать не обязательно, в этом случае подключение будет выполнено к
текущему диску.

  Примеры:
HDD<BK>		- выводит текущие номера подключенных "дискет".

HDD A:1F
  или
HDD A:001F	- подключает к устройству А: "дискету" HDD номер 1FH.

HDD B:0		- отключает винчестер от устройства В:.

HDD 5		- назначает текущему диску (А: или В:) дискету номер 5.

  В ПКК РДС v2.00 введена возможность переназначения консоли ввода-вывода,
аналогичная имеющейся в МикроДОС.
  Пример.

C>DIR>LST<BK> ,где <ВК> означает нажатие соответсвующей клавиши.

По этой команде листинг каталога диска С: будет выведен помимо экрана в файл
LST,на этом же диске.

C>SID<SID.INP<BK>

По этой команде будет загружен отладчик SID,и команды будут ему передаваться
из файла SID.INP.

  Кстати теперь при запуске файлов типа .COM и .BAT возможно указание расшире
ния.К примеру на диске имеются файлы DIRH.COM и DIRH.BAT,и после команды

C>DIRH<BK>
будет всегда запускаться COM-файл,так как у COM-файлов приоритет над BAT-фай-
лами.И поэтому нужно вводить:

C>DIRH.COM<BK> (или DIRH<BK>  - для запуска COM-файла.

и C>DIRH.BAT<BK>  -  для запуска BAT-файла.

  Для вывода управляющих последовательностей символов,по прежнему использует-
ся их прямой набор.
	Пример.
	A>^[\<BK>	-Включение КОИ-7.Нажать клавиши <АР2><\><BK>.
  Управляющая последовательность кодов 1Bh,07 включает/выключает подачу звуко
вого сигнала при каждом нажатии клавиш.
	Пример:
	A>^[^G<BK>	-нажатие клавиш <АР2><УС+G><BK>.



			1.1 Использование BAT-файлов.

  BAT-файл представляет собой обычный текстовый файл,в котором содержатся
команды только для ПКК,возможно задание до 10-ти параметров.Последовательно-
сть символов %N -где N номер параметра от 0 до 9,означает подстановку соответ
ствующего параметра при исполнении BAT-файла.Параметры разделяются между со-
бой пробелом.
	Пример:
C>PROG PAR0 PAR1 PAR2 ... PAR9
	Пример использования BAT-файла.
Содержимое файла MAC.BAT :

M80 =%0
L80 %0,%1,%0/N/E

Этот файл можно использовать для трансляции любой программы на МакроАссембле-
ре вместе с файлом-библиотекой типа .REL.После введения следующей команды:
MAC PROG MYLIB<BK> ,ПКК выполнит следующие команды:

M80 =PROG
L80 PROG,MYLIB,PROG/N/E

Результатом будет файл PROG.COM.


			2.Драйвер клавиатуры.
  Драйвер клавиатуры примерно такой же как и в МИКРОДос последних версий.
	1) Переключение русские/латинские (в том числе временное) -<РУС/ЛАТ>.
	2) Переключение маленькие/большие (в том числе временное) - <СС>.
  Осуществляется поддержка индикации каждого режима клавиатуры.
	3) При нажатии клавиш <УС+СС> и клавиш дополнительного поля клавиату-
ры,вырабатываются коды псевдографики.Раскладка такая же как в МИКРОДос.Рис.1.
Переключение групп тоже аналогичное - <'+ТАБ>,<'+ПС>,<'+ЗБ>,<'+ВК>,где значок
"'" означает одновременное нажатие <УС+СС>.При одновременном нажатии клавиши
<УС> и клавиш дополнителного поля и <ТАБ>,<ПС>,<ЗБ>,<ВК>,так же вырабатывают-
ся коды псевдографики.Рис.2.

	Рис.1				Рис.2
	┌───┬───┬───┐			┌───┬───┬───┐
	│ ╔ │ ╦ │ ╗ │			│ ¤ │ Ё │ ё │
	├───┼───┼───┤			├───┼───┼───┤
	│ ╠ │ ╬ │ ╣ │			│ █ │ ° │ ▓ │
	├───┼───┼───┤			├───┼───┼───┤
	│ ╚ │ ╩ │ ╝ │			│ ▀ │ ▌ │ ▒ │
	├───┼───┼───┤			├───┼───┼───┤
	│ ═ │ ║ │ ═ │			│ ▄ │ ▐ │ ░ │
	└───┴───┴───┘			└───┴───┴───┘
	
		3.Распределение памяти и совместимость.
  После запуска программы из командной строки,становится доступной память с
адреса 100h по 0FAFFH.
  Все программы написанные для СР/М будут работать,программы написанные в МИ-
КРОДос для ВЕКТОРа тоже будут работать,если в них нет обращения к функциям
BDOS,которых нет в СР/М.Не будут работать также программы некорректно написан
ные,то есть такие которые обращаются напрямую к РК-консоли по адресам 0F800h-
0F81Bh.Эти адреса в РДС предоставлены под ОЗУ пользователя,и в принципе можно
было написать эмулятор РК-консоли для запуска этих немногочиленных программ,
но эта игра вряд ли стоит свеч.Ведь никто не собирается заставлять вас,уважа-
емые пользоатели,стирать со всех своих дискет МИКРОДос.
  Ёмкость квазидиска в РДС составляет 220кб,что на 16кб меньше чем в МикроДОС
но на практике ёмкости примерно равны (в МикроДОС первым файлом OS.COM обычно
заносится сама эта система (около 16-20кб),а в РДС этот файл занимает 1кб +
еще COMMAND.SYS).Формат квазидиска в МикроДОС и РДС одинаков,за одним исключе
нием,-группы после 0B4h в РДС распределены на 16кб "дальше",стало быть если
ваш квазидиск не заполнен после группы 0B4h (дорожка 180),то вы спокойно може
те "переключаться" с МикроДОС на РДС и обратно,и спокойно пользоваться всеми
файлами.

			4.Генерация РДС.
  Для записи РДС на системные дорожки можно воспользоваться программой System
Generator для РДС.Синтаксис командной строки аналогичен программе SYSGEN в Ми
кроДОС.

SG [S:]FILENAME.EXT D:ADDR	,где S-исходный диск,D-диск назначения,ADDR-
стартовый адрес файла (шестн.),а FILENAME.EXT - имя файла.
	Пример:
A>SG RDS2.COM A:100<BK>

		   5.Изменения по сравнению с v1.xx.
  Кроме того,что переключение букв большие/мал. происходит теперь клавишей
<СС>,а клавиша <F5> теперь вырабатывает код 04,- изменению коснулось клавиш
F6-F10.Ранее для их задействования надо было нажимать клавишу <УС> и одну из
клавиш <F1>-<F5>,теперь вместо клавиши <УС> надо нажать клавишу <СС>.Комбина-
ции клавиши <СС> и <F1>-<F5> вырабатывают коды 10h-14h.Во всех ранних програм
мах (например Test & Format) необходимо пользоваться старым способом.

			6.Заключение.
  В целом,представленная версия РДС может считаться вполне законченным продук
том,в который,по принципу разумной достаточности,включены все необходимые для
хорошей ОС для ВЕКТОРа возможности,поэтому представляется маловероятной необ-
ходимость в будущем выпускать новые версии РДС.Та цель для которой создава-
лась эта ОС,достигнута,кроме того после выхода в свет v1.04,оказалось что мно
гие пользователи желают видеть эту ОС предназначенной для работы не только в
основном в режиме №1,но и как конкурента ОС типа МикроДОС,т.е. предназначен-
ной и для работы программ разработанных ранее под CP/M.В частности результа-
том этого явилась смена формата знакогенератора и следовательно увеличение бы
строты вывода символов на экран,а также повышения сервисности процессора кон-
сольных команд.

						Вьюнов.
