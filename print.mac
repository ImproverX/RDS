	GLOBAL	@PRINT,@PRNTC,@HXOUT	EXTRN	@SMASC,@PLTS0,@COLOR,@SCRMS,@PLOTSFONT	EQU	0C000HESCCNT:	DB	0ESCP:	DB	0CURX:	DB	0YY:	DB	0XX:	DB	0SYMBUF:	DS	10@PRINT:	MOV	A,M	ANA	A	RZ	PUSH	B	MOV	C,A	CALL	@PRNTC	POP	B	INX	H	JMP	@PRINT@HXOUT:	MOV	B,A	RRC	RRC	RRC	RRC	CALL	HEX10	MOV	A,BHEX10:	ANI	15	CPI	10	JC	$+5	ADI	7	ADI	30H	MOV	C,A	JMP	@PRNTC@PRNTC:	PUSH	H	PUSH	D	PUSH	B	PUSH	PSWPRNT01:	LXI	H,ESCCNT	MOV	A,M	ANA	A	JZ	PRN01T	CPI	80H	JZ	ESCFPR	CPI	20H	JZ	PRNC09	JMP	ESC00PRN01T:	MOV	A,C	CPI	20H	JNC	PRNT10	CPI	1BH	JNZ	PRNTSL	INR	M	JMP	PRNT99ESCFPR:	MVI	M,0	JMP	PRNT10ESC00:	CPI	1	JNZ	ESC84	MOV	A,C	CPI	'Y'	JZ	ESC06ESC99:	XRA	A	STA	ESCCNT	JMP	PRNT99ESC06:	INR	M	JMP	PRNT99ESC84:	MOV	A,M	CPI	3	JNC	ESC14	INR	M	MOV	A,C	SUI	20H	JM	ESC10	CPI	25	JM	$+5ESC10:	MVI	A,24	RLC	MOV	C,A	RLC	RLC	ADD	C	MOV	C,A	MVI	A,-1	SUB	C	STA	YY	JMP	PRNT99ESC14:	MVI	M,0	MOV	A,C	SUI	20H	JM	ESC16	CPI	42	JM	$+5ESC16:	MVI	A,41	STA	CURX	JMP	PRNT99COPY:	MOV	A,M	STAX	D	INX	H	INX	D	DCR	B	JNZ	COPY	RETPRNT10:	MOV	L,C	MVI	H,0	DAD	H	PUSH	H	DAD	H	DAD	H	POP	D	DAD	D	LXI	D,FONT	DAD	D	DI	LDA	15	OUT	10H	LXI	D,SYMBUF	PUSH	D	MVI	B,10	CALL	COPY	LDA	3CH	OUT	10H	EI	LDA	CURX	ADD	A	MOV	D,A	ADD	A	ADD	D	MOV	C,A	RRC	RRC	RRC	ANI	1FH	ADI	80H	MOV	D,A	LDA	YY	MOV	E,A	MOV	A,C	STA	XX	ANI	7	MOV	C,A	MVI	A,7	SUB	C	LXI	H,PRNT15	ADD	L	MOV	L,A	MVI	A,0	ADC	H	MOV	H,A	SHLD	PRNT14+1	MVI	B,0	LXI	H,TABM	DAD	B	DAD	B	MOV	C,M	INX	H	MOV	B,M	XCHG	PUSH	H	PUSH	B	LDA	@SMASC	MOV	E,A	LDA	@COLOR	RRC	RRC	RRC	RRC	MOV	D,A	MOV	A,H	ADI	60H	MOV	H,A	MVI	A,4PRNT11:	PUSH	PSW	MOV	A,E	RRC	MOV	E,A	CC	PRNTZN	MOV	A,D	RRC	MOV	D,A	MVI	A,-20H	ADD	H	MOV	H,A	POP	PSW	DCR	A	JNZ	PRNT11	POP	B	POP	H	POP	D	MVI	A,10PRNT12:	PUSH	PSW	PUSH	D	PUSH	H	LDAX	D	LXI	D,600H	LXI	H,TBCODEPRNT13:	RLC	JNC	PRNT17	PUSH	PSW	MOV	A,E	ORA	M	MOV	E,A	POP	PSWPRNT17:	INX	H	DCR	D	JNZ	PRNT13	MOV	A,EPRNT14:	JMP	0PRNT15:	RRC	RRC	RRC	RRC	RRC	RRC	RRC	MOV	D,A	POP	H	PUSH	H	PUSH	B	MOV	A,D	ANA	B	MOV	E,A	CALL	@PLTS0	POP	B	POP	H	MOV	A,D	ANA	C	JZ	PRNT16	MOV	E,A	PUSH	H	PUSH	B	INR	H	CALL	@PLTS0	POP	B	POP	HPRNT16:	POP	D	POP	PSW	INX	D	DCR	L	DCR	A	JNZ	PRNT12PRNC18:	LXI	H,CURX	INR	M	MOV	A,M	CPI	42	JC	PRNT99	MVI	M,0	JMP	PRNC0ATBCODE:	DB	80H,20H,8,40H,10H,4TABM:	DW	0FC00H,7E00H,3F00H,1F80H	DW	0FC0H,7E0H,3F0H,1F8HPRNTZN:	PUSH	H	PUSH	D	MOV	A,D	MVI	D,10	RRC	JNC	PRNZ30PRNZ20:	MOV	A,M	ORA	B	MOV	M,A	INR	H	MOV	A,M	ORA	C	MOV	M,A	DCR	H	DCR	L	DCR	D	JNZ	PRNZ20	POP	D	POP	H	RETPRNZ30:	MOV	A,B	CMA	ANA	M	MOV	M,A	INR	H	MOV	A,C	CMA	ANA	M	MOV	M,A	DCR	H	DCR	L	DCR	D	JNZ	PRNZ30	POP	D	POP	H	RETPRNC0A:	XRA	A	STA	CURX	LXI	H,YY	MOV	A,M	SUI	10	MOV	M,APRNT99:	LDA	ESCCNT	CPI	20H	JNZ	PRN99T	LDA	CURX	ANI	7	JNZ	PRNT01	XRA	A	STA	ESCCNTPRN99T:	POP	PSW	POP	B	POP	D	POP	H	EI	RETPRNC01:	MVI	A,80H	STA	ESCCNT	JMP	PRNT99PRNC09:	MVI	A,20H	MOV	C,A	STA	ESCCNT	JMP	PRNT10PRNTSL:	CPI	8	JZ	PRNC08	CPI	9	JZ	PRNC09	CPI	1	JZ	PRNC01	CPI	18H	JZ	PRNC18	CPI	10	JZ	PRNC0A	CPI	13	JZ	PRNC0D	CPI	7	JZ	PRNC07	CPI	19H	JZ	PRNC19	CPI	1AH	JZ	PRNC1A	CPI	12	JZ	PRNC0C	CPI	1FH	JZ	PRNC0C	CPI	11	JZ	PRNC0B	JMP	PRNT10PRNC08:	LXI	H,CURX	DCR	M	JP	PRNT99	MVI	M,41PRNC19:	LXI	H,YY	MVI	A,-1	CMP	M	JZ	PRC190	MOV	A,M	ADI	10	MOV	M,A	JMP	PRNT99PRC190:	ADI	16	MOV	M,A	JMP	PRNT99PRNC0D:	XRA	A	STA	CURX	JMP	PRNT99PRNC1A:	LXI	H,YY	MOV	A,M	SUI	10	MOV	M,A	JMP	PRNT99PRNC07:	DI	MVI	H,16PRNC70:	MVI	L,0PRNC72:	DCR	L	PUSH	PSW	MOV	A,L	ANI	8	JZ	$+5	MVI	A,1	OUT	0	POP	PSW	JNZ	PRNC72	DCR	H	JNZ	PRNC70	EI	JMP	PRNT99PRNC0C:	DI	LXI	H,0	LDA	@SMASC	MOV	E,A	MVI	D,4PRCL10:	SHLD	PRCL22+1	MOV	A,E	RRC	MOV	E,A	CC	PRCL20	LXI	B,-2000H	DAD	B	DCR	D	JNZ	PRCL10	EI	MVI	A,-1	STA	YY	XRA	A	STA	CURX	JMP	PRNT99PRCL20:	PUSH	H	LXI	H,0	DAD	SP	SHLD	PRCL24+1	LXI	H,512	LXI	B,0PRCL22:	LXI	SP,0PRCL23:	PUSH	B	PUSH	B	PUSH	B	PUSH	B	PUSH	B	PUSH	B	PUSH	B	PUSH	B	DCX	H	MOV	A,H	ORA	L	JNZ	PRCL23PRCL24:	LXI	SP,0	POP	H	RETPRNC0B:	MVI	A,-1	STA	YY	XRA	A	STA	CURX	JMP	PRNT99