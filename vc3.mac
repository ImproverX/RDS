	ASEG	EXTERNAL VIEW,CHDD,VIEWHD,SHWHDD	GLOBAL	CLEAR,HDCMP,FRBIOS,KEY,HLA	GLOBAL	WSECT,DDEC,COPY,FILL,ONINV,OFINV	GLOBAL	BEG12,CCPRES,CHDIR,TDISK,PRINT,PRINTH,WPUSH,WPOP	GLOBAL	DUBPRN,WINDOW,VCSETY,FSEAR,SREAD,TUSER	GLOBAL	GUSER,LPODEK,SPODEK,MBUF	ORG	0100H	JMP	STARTBASE	EQU	0FB00HDIRBL	EQU	BASE-1000HDIRBR	EQU	BASE-800HWBUF	EQU	0E500HMBUF	EQU	6D00HSCRBUF	EQU	2D00HBCURL	EQU	102HBCURR	EQU	2902HBCRCCP	EQU	316HBCUR:	DW	0BDIR:	DW	0LDISK:	DB	1RDISK:	DB	3LUSER:	DB	0RUSER:	DB	0TDISK:	DB	0TUSER:	DB	0WFILE:	DB	0LWFILE:	DB	0RWFILE:	DB	0NFILE:	DB	0RNFILE:	DB	0LNFILE:	DB	0NPANL:	DB	0LSMFL:	DB	0RSMFL:	DB	0SMFL:	DB	0STR:	DB	12,15,'$'STRNOR:	DB	27,'/$'OPT:	DB	'C:ED      '	DB	0,-1NSORT:	DB	1STR0:	DB ' A:\User0 $'STRF:	DB '1 Help  2 User  3 View  ' DB '4 Edit  5 Copy  6 Rename7 RenCop' DB '8 Delete9 Menu  0 Quit ',8STRF2:	DB '1 ChHDD 2 ChDsk 3 ViewHD' DB '4       5       6 MovGrp7       ' DB '8       9       0      ',8STRI:	DB 'Total:$Kb, ' DB 'Used:$Kb, Free' DB ':$Kb.$'STR1:	DB 'Size:    Kb'	DB ' ┐',25,8,'∙',26,26,8,'÷',25,'File(s):$'STRA:	DB 1BH,'Y !' DB '(c) The Vector Commander, ' DB 'Version 3.00     Copyright (c)' DB ' 1996 by Vewnov V.A.$'STRU:	DB 14,' User $'STRUZ:	DB 'Введите, пожалуйста$'	DB '   номер User [ ]  $'STRCD:	DB 14,' ChDsk $'STRCHD:	DB 'Выберите диск$'	DB '  A  B  C$'STRM:	DB 14,' MarkF $'STRMR:	DB 'Введите  маску$'	DB 15,24,'            $'STRR:	DB 14,' Rename $'STRR0:	DB 'Файл: $'STRR1:	DB 'Введите новое имя:$' DB 24,24,24,15,'            $'STRMV:	DB 14,' Move $'STRNCP:	DB 14,' RenCop $'STRMSG:	DB 14,7,' Внимание ! $'SDEL:	DB '  Не могу удалить.$'	DB ' (Защита от записи)$'SREN:	DB 'Нельзя переименовать$'	DB ' (Защита от записи)$'SREN0:	DB 'Нельзя переименовать$'SCOP:	DB '  Уже существует !$'	DB 'Переписать?(Да-<ВК>)$'SMOV:	DB 'Нельзя переместить.$'	DB '  Уже существует !$'SNMEST:	DB ' Нельзя скопировать.$'	DB ' Нет места на диске.$'SNOTKR:	DB ' Нельзя скопировать.$'	DB '   Каталог полон.$'STROP:	DB 14,' Options $'STROP0:	DB 'Цвет фона$Цвет букв$Редактор$'	DB 'Сортиров.$'RESET:	MVI	C,13	JMP	5SELDSK:	MVI	C,14	JMP	5OPENF:	MVI	C,15	JMP	5GTBLPD:	MVI	C,31	JMP	5GETOBZ:	MVI	C,27	JMP	5CLOSEF:	MVI	C,16	JMP	5FSEAR:	MVI	C,17	JMP	5NSEAR:	MVI	C,18	JMP	5ERAF:	MVI	C,19	JMP	5SREAD:	MVI	C,20	JMP	5SWRITE:	MVI	C,21	JMP	5MAKEF:	MVI	C,22	JMP	5RENF:	MVI	C,23	JMP	5SETDMA:	MVI	C,26	JMP	5GUSER:	MVI	C,32	JMP	5KEY:	PUSH	H	PUSH	D	PUSH	B	LXI	B,980H	LXI	D,FRBIOS	MVI	A,1	STAX	D	CALL	5	POP	B	POP	D	POP	H	RETTSKEY:	PUSH	D	LXI	B,980H	LXI	D,FRBIOS	XRA	A	STAX	D	CALL	5	POP	D	ANA	A	RETFWRITE:	LXI	H,FRBIOS	PUSH	H	MVI	M,12	INX	H	MOV	M,C	INX	H	MOV	M,B	POP	D	LXI	B,980H	JMP	5FRBIOS:	DS	3START:	LXI	SP,0	MVI	A,0C3H	STA	18H	STA	10H	LXI	H,COPY	SHLD	19H	LXI	H,PRINTC	SHLD	11H	CALL	GTDSPR	CALL	SAVSCR	CALL	REZID	LXI	D,STRNOR	CALL	OUTSTR	XRA	A	STA	LNFILE	STA	RNFILE	LXI	H,STR	CALL	PRINT	CALL	PANELS	LXI	H,STRA	CALL	PRINT	CALL	FUNKEY	MVI	A,40H	STA	FLFNK	LXI	H,BCRCCP	SHLD	CURCCP	LXI	H,CCPSTR	SHLD	FORBATST02:	CALL	LDIR	CALL	RDIRST10:	CALL	CHPARBEGIN:	CALL	INVDSK	LXI	H,22	CALL	VCSETY	LDA	TDISK	ADI	40H	MOV	C,A	RST	2	MVI	C,':'	RST	2	MVI	C,'>'	RST	2BEG10:	CALL	OTBFL	CALL	CCPRESBEG12:	CALL	OFINVBEG13:	CALL	TSKEY	PUSH	PSW	LDA	FLFNK	MOV	E,A	IN	1	ANI	40H	CMP	E	JZ	BEG15	STA	FLFNK	ADD	A	JP	BEG14	CALL	FUNKEY	CALL	CCPRES	JMP	BEG15BEG14:	CALL	FNKEY2	CALL	CCPRESBEG15:	POP	PSW	JZ	BEG13	CALL	KEY	LXI	H,KTFKEY	LXI	D,KTFVCT	MVI	C,13	CALL	JUMP	JMP	BEG16KTFKEY:	DB 20,18,16	DB 17,19,0BCH,0B0H,0AAH,99H,0A5H,0A6H	DB 0BDH,0B1HKTFVCT:	DW EXIT,DEL,REN	DW RENCOP,MENU,RUNC,CHD,MOVE,MOVE,MOVE,MOVE	DW CHDD,VIEWHD	;^^^ ВОЗМОЖНЫ ЧЕТЫРЕ КОДИРОВКИ !JUMP:	CMP	M	JZ	JUMP10	INX	H	INX	D	INX	D	DCR	C	JNZ	JUMP	RETJUMP10:	XCHG	MOV	E,M	INX	H	MOV	D,M	XCHG	POP	PSW	PCHLBEG16:	MOV	C,A	IN	1	ANI	40H	MOV	A,C	JZ	CNTRL	LXI	H,KTSKEY	LXI	D,KTSVCT	MVI	C,14	CALL	JUMP	CPI	20H	JC	BEG12	MOV	C,A	CALL	CCPOUT	JMP	BEG12KTSKEY:	DB 27,13,8,18H,19H,1AH,2	DB 3,4,0,9,1,12,7FHKTSVCT:	DW CLRCCP,RUN,LEFT,RIGHT,UP,DOWN,PROSM	DW ED,COP,HELP,CHPAN,CHUS,INS,ZABEXIT:	CALL	LOASCR	LXI	B,0C80H	MVI	E,0	CALL	5	JMP	0PSORT:	DB	8,1,3,9,2,12SORT:	LDA	WFILE	ANA	A	RZ	MOV	D,A	DCR	D	RZ	LDA	NSORT	ANA	A	RZ	LXI	H,PSORT	DCR	A	ADD	A	CALL	HLA	MOV	B,M	INX	H	MOV	C,M	LHLD	BDIR	MVI	E,1	PUSH	D	MOV	D,H	MOV	E,LSORT02:	MVI	A,14	CALL	HLA	XCHG	CALL	SORT10	JC	SORT20SORT04:	POP	H	INR	L	DCR	H	RZ	PUSH	H	MOV	H,D	MOV	L,E	JMP	SORT02SWP:	MOV	C,M	LDAX	D	MOV	M,A	MOV	A,C	STAX	D	INX	H	INX	D	DCR	B	JNZ	SWP	RETSORT20:	XCHG	SHLD	SPAR0	XTHL	SHLD	SPAR1	XTHLSORT22:	PUSH	B	MVI	B,14	PUSH	D	CALL	SWP	POP	D	POP	B	POP	H	DCR	L	JZ	SORT30	PUSH	H	MOV	H,D	MOV	L,E	MVI	A,-14	CALL	HLAS	CALL	SORT10	XCHG	JC	SORT22	POP	HSORT30:	LHLD	SPAR1	PUSH	H	LHLD	SPAR0	XCHG	JMP	SORT04HLAS:	ADD	L	MOV	L,A	RC	DCR	H	RETSORT10:	PUSH	H	PUSH	D	MOV	A,C	CALL	HLA	XCHG	MOV	A,C	CALL	HLA	XCHG	LDA	NSORT	CPI	3	JZ	SORT18	PUSH	BSORT12:	LDAX	D	CMP	M	JC	SORT14	JZ	$+6	JNC	SORT16	INX	H	INX	D	DCR	B	JNZ	SORT12SORT16:	POP	B	POP	D	POP	H	XRA	A	RETSORT18:	PUSH	B	MOV	C,M	INX	H	MOV	B,M	XCHG	MOV	E,M	INX	H	MOV	D,M	CALL	DBCMP	JC	SORT14	JMP	SORT16SORT14:	POP	B	POP	D	POP	H	STC	RETDBCMP:	MOV	A,E	SUB	C	MOV	A,D	SBB	B	RETOFINV:	MVI	C,15	JMP	PRINTCONINV:	MVI	C,14	JMP	PRINTCINVDSK:	CALL	ONINV	CALL	PRUSR	JMP	OFINVNORDSK:	CALL	OFINV	JMP	PRUSRCLRCCP:	LXI	H,BCRCCP	SHLD	CURCCP	SHLD	YY	LXI	H,CCPSTR	SHLD	FORBAT	CALL	VCSET	MVI	C,16H	RST	2	CALL	CCPRES	JMP	BEG12HELP:	MVI	E,0	LDA	4	PUSH	PSW	CALL	GUSER	LXI	H,HLPFIL	LXI	D,5CH	PUSH	D	MVI	B,12	RST	3	CALL	CLEAR	POP	D	PUSH	D	MVI	A,3	STAX	D	CALL	FSEAR	CPI	4	JC	HELP10	POP	D	PUSH	D	MVI	A,1	STAX	D	CALL	FSEAR	CPI	4	JC	HELP10	POP	D	JMP	PROSM1HELP10:	POP	H	JMP	PROSM0HLPFIL:	DB	3,'VC      HLP'RUN:	LDA	WFILE	ANA	A	JZ	BEG12	LDA	CURCCP+1	CPI	3	JNZ	ED20	LDA	NFILE	PUSH	PSW	LXI	H,SMFL	ADD	M	STA	NFILE	CALL	GTFILE	POP	PSW	STA	NFILE	LXI	D,CBUF	MVI	B,12	CALL	SCOPY	LXI	H,VCEXT	LXI	D,5CH	MVI	B,12	RST	3	CALL	CLEAR	LXI	D,80H	CALL	SETDMA	MVI	E,0	CALL	GUSER	LXI	H,RUN99	PUSH	H	LXI	D,5CH	CALL	OPENF	INR	A	RZ	LXI	D,5CH	CALL	SREAD	ANA	A	RNZ	XRA	A	STA	MODCOPRUN10:	LXI	H,CBUF+9	MVI	B,3RUN12:	CALL	RUN00	RC	CPI	'*'	JZ	RUN20	CPI	'?'	JZ	RUN14	CMP	M	JNZ	RUN16RUN14:	INX	H	DCR	B	JNZ	RUN12RUN20:	CALL	RUN00	RC	CPI	':'	JNZ	RUN20RUN22:	CALL	RUN00	RCRUN23:	CPI	13	JZ	RUN90	CPI	'!'	JZ	RUN24RUN18:	MOV	C,A	CALL	CCPOUT	JMP	RUN22RUN16:	CALL	RUN00	RC	CPI	10	JNZ	RUN16	JMP	RUN10RUN24:	CALL	RUN00	RC	CPI	'.'	JZ	RUN30	CPI	'!'	JZ	RUN18	CPI	':'	JZ	RUN32	PUSH	PSW	CALL	RUN34	POP	PSW	JMP	RUN23RUN30:	CALL	RUN34	MVI	C,'.'	CALL	CCPOUT	CALL	RUN00	RC	CPI	'!'	JNZ	RUN23	LXI	H,CBUF+9	MVI	B,3	CALL	PNCP10	JMP	RUN22RUN32:	LDA	TDISK	ADI	40H	MOV	C,A	CALL	CCPOUT	MVI	C,':'	CALL	CCPOUT	JMP	RUN22RUN34:	LXI	H,CBUF+1	MVI	B,8	JMP	PNCP10RUN90:	POP	H	JMP	ED20RUN99:	LDA	TUSER	MOV	E,A	CALL	GUSER	JMP	BEG12RUN00:	PUSH	H	PUSH	B	LXI	H,80H	LDA	MODCOP	CALL	HLA	MOV	A,M	PUSH	PSW	LXI	H,MODCOP	INR	M	JP	RUN02	MVI	M,0	LXI	D,5CH	CALL	SREAD	ANA	A	JNZ	RUN04RUN02:	POP	PSW	CPI	1AH	JNZ	RUN03RUN04:	STCRUN06:	POP	B	POP	H	RETRUN03:	ANA	A	JMP	RUN06VCEXT:	DB	3,'VC      EXT'RUNC:	LDA	WFILE	ANA	A	JZ	BEG12	LDA	NFILE	PUSH	PSW	LXI	H,SMFL	ADD	M	STA	NFILE	CALL	GTFILE	POP	PSW	STA	NFILE	INX	H	MVI	B,8	CALL	PNCP10	MVI	C,'.'	CALL	CCPOUT	MVI	B,3	CALL	PNCP10	JMP	BEG12ED:	LDA	WFILE	ANA	A	JZ	BEG12	LXI	H,BCRCCP	SHLD	YY	CALL	VCSET	LXI	H,OPT	MVI	B,10ED10:	MOV	A,M	CPI	20H	JZ	ED12	INX	H	MOV	C,A	CALL	CCPOUT	DCR	B	JNZ	ED10ED12:	MVI	C,20H	CALL	CCPOUT	LDA	NFILE	PUSH	PSW	LXI	H,SMFL	ADD	M	STA	NFILE	CALL	GTFILE	POP	PSW	STA	NFILE	CALL	PINCCPED20:	LHLD	FORBAT	MVI	M,13	INX	H	MVI	M,10	INX	H	MVI	M,1AH	MVI	E,0	CALL	GUSER	LXI	D,80H	CALL	SETDMA	LXI	H,REZFIL	LXI	D,5CH	PUSH	D	MVI	B,12	RST	3	CALL	CLEAR	POP	D	PUSH	D	CALL	OPENF	LXI	H,100H	LXI	D,80H	MVI	B,128	RST	3	POP	D	CALL	SWRITE	LDA	TUSER	MOV	E,A	RRC	RRC	RRC	RRC	LXI	H,4	ORA	M	MOV	M,A	CALL	GUSER	LXI	H,CCPSTR	LXI	D,80H	MVI	B,128	RST	3	LXI	B,0A80H	CALL	5	CALL	LOASCR	JMP	0PINCCP:	INX	H	MVI	B,8	CALL	PNCP10	MVI	C,'.'	CALL	CCPOUT	MVI	B,3PNCP10:	MOV	A,M	CPI	20H	JZ	PNCP12	INX	H	ANI	7FH	MOV	C,A	CALL	CCPOUT	DCR	B	JNZ	PNCP10	RETPNCP12:	INX	H	DCR	B	JNZ	PNCP12	RETMENU:	LXI	H,1D08H	PUSH	H	LXI	D,718H	CALL	WPUSH	LXI	D,616H	XRA	A	CALL	WINDOW	POP	H	PUSH	H	MVI	A,6	ADD	H	MOV	H,A	CALL	VCSETY	LXI	H,STROP	CALL	PRINT	POP	H	INR	L	INR	H	PUSH	H	CALL	VCSETY	LXI	H,STROP0	MVI	B,4	CALL	WPRINT	POP	H	MVI	A,10	ADD	H	MOV	H,A	SHLD	VOPXY	LXI	H,80H	MVI	M,2	SHLD	VPPAR0	LXI	H,90H	MVI	M,2	SHLD	VPPAR1	LXI	H,0A0H	MVI	M,10	SHLD	VPPAR2	LXI	H,0B0H	MVI	M,1	SHLD	VPPAR3	LDA	NSORT	ADI	30H	INX	H	MOV	M,A	MVI	A,-1	STA	MODPRN	LXI	H,81H	SHLD	MODPRA	LDA	OPT+10	CALL	HEXOUT	LXI	H,91H	SHLD	MODPRA	LDA	OPT+11	CALL	HEXOUT	LXI	H,0A1H	SHLD	MODPRA	LXI	H,OPT	MVI	B,10	CALL	SPRNT	XRA	A	STA	MODPRN	CALL	MENP0	CALL	MENP1	CALL	MENP2	CALL	MENP3	JMP	MENU00MENP0:	PUSH	H	LHLD	VOPXY	CALL	VCSETY	LHLD	VPPAR0MENPO:	MOV	B,M	INX	H	CALL	SPRNT	POP	H	RETMENP1:	PUSH	H	LHLD	VOPXY	INR	L	CALL	VCSETY	LHLD	VPPAR1	JMP	MENPOMENP2:	PUSH	H	LHLD	VOPXY	INR	L	INR	L	CALL	VCSETY	LHLD	VPPAR2	JMP	MENPOMENP3:	PUSH	H	LHLD	VOPXY	INR	L	INR	L	INR	L	CALL	VCSETY	LHLD	VPPAR3	JMP	MENPOMENU05:	MOV	A,D	ANA	A	JZ	MENP0	DCR	A	JZ	MENP1	DCR	A	JZ	MENP2	JMP	MENP3MENU00:	MVI	D,0MENU10:	PUSH	H	PUSH	D	CALL	OFINV	CALL	MENU05	CALL	CCPRESMENU12:	CALL	KEY	CPI	27	JZ	MENU99	CPI	13	JZ	MENU40	CPI	19H	JZ	MENU14	CPI	1AH	JNZ	MENU12	POP	D	MOV	A,D	MOV	E,D	CPI	3	JC	$+5	MVI	D,-1	INR	D	POP	HMENU13:	PUSH	H	PUSH	D	CALL	ONINV	MOV	A,E	CALL	MENU05+1	POP	D	POP	H	JMP	MENU10MENU40:	POP	D	POP	H	CALL	WINP	JMP	MENU10MENU14:	POP	D	MOV	A,D	MOV	E,D	ANA	A	JNZ	$+5	MVI	D,4	DCR	D	POP	H	JMP	MENU13MENU99:	POP	D	POP	H	LHLD	VPPAR0	INX	H	CALL	MENUHX	STA	OPT+10	LHLD	VPPAR1	INX	H	CALL	MENUHX	STA	OPT+11	LHLD	VPPAR2	INX	H	LXI	D,OPT	MVI	B,10	RST	3	LHLD	OPT+10	SHLD	STRCOL+2	LHLD	VPPAR3	INX	H	LDA	NSORT	MOV	C,A	MOV	A,M	SUI	30H	ANI	3	STA	NSORT	CMP	C	PUSH	PSW	LXI	H,STRCOL	MVI	B,4	CALL	PRNTN	CALL	WPOP	CALL	CCPRES	POP	PSW	JNZ	ST02	JMP	BEG12STRCOL:	DB 27,'P',0,0MENUHX:	CALL	MENHX0	INX	H	RRC	RRC	RRC	RRC	MOV	B,A	CALL	MENHX0	ORA	B	RETMENHX0:	MOV	A,M	SUI	30H	CPI	10	RC	SUI	7	ANI	15	RETWINP:	PUSH	H	PUSH	D	MOV	A,D	LXI	H,VPPAR0	ANA	A	JZ	WINP02	LXI	H,VPPAR1	DCR	A	JZ	WINP02	LXI	H,VPPAR2	DCR	A	JZ	WINP02	LXI	H,VPPAR3WINP02:	MOV	A,M	INX	H	MOV	H,M	MOV	L,A	PUSH	H	PUSH	D	LXI	D,0F0H	MVI	B,16	RST	3	POP	D	MOV	A,D	LHLD	VOPXY	ADD	L	MOV	L,A	CALL	VCSETY	LDA	0F0H	MOV	E,A	MVI	D,0	LXI	H,0F1HWINP10:	CALL	KEY	CPI	27	JZ	WINP1B	CPI	13	JZ	WINP0D	CPI	8	JZ	WINP7F	CPI	7FH	JZ	WINP7F	CPI	20H	JC	WINP10	CPI	5BH	JNC	WINP10	MOV	C,A	MOV	A,D	CMP	E	JZ	WINP10	INR	D	MOV	M,C	INX	H	RST	2	JMP	WINP10WINP1B:	POP	H	POP	D	POP	H	STC	RETWINP7F:	MOV	A,D	ANA	A	JZ	WINP10	DCR	D	DCX	H	CALL	BACK	MVI	C,20H	MOV	M,C	RST	2	CALL	BACK	JMP	WINP10WINP0D:	POP	H	LXI	D,0F0H	MVI	B,16	XCHG	RST	3	POP	D	POP	H	XRA	A	RETHDCMP:	MOV	A,H	SUB	D	RNZ	MOV	A,L	SUB	E	RETPROSM:	LDA	WFILE	ANA	A	JZ	BEG12	LDA	NFILE	PUSH	PSW	LXI	H,SMFL	ADD	M	STA	NFILE	CALL	GTFILE	POP	PSW	STA	NFILE	LDA	4	PUSH	PSW	LXI	D,5CH	MVI	B,12	RST	3	MOV	E,M	INX	H	MOV	D,M	XCHG	SHLD	WSECT	XRA	A	STA	5CHPROSM0:	CALL	SPODEK	CALL	VIEW	CALL	LPODEKPROSM1:	LDA	TUSER	MOV	E,A	CALL	GUSER	POP	PSW	STA	4	CALL	CCPRES	JMP	BEG12MESS:	PUSH	H	LXI	H,1E09H	PUSH	H	LXI	D,618H	CALL	WPUSH	LXI	D,516H	XRA	A	CALL	WINDOW	POP	H	PUSH	H	MVI	A,5	ADD	H	MOV	H,A	CALL	VCSETY	LXI	H,STRMSG	CALL	PRINT	POP	H	PUSH	H	LXI	D,201H	DAD	D	CALL	VCSETY	LXI	H,STRR0	CALL	PRINT	LXI	H,5DH	MVI	B,8	CALL	SPRNT	MVI	C,'.'	RST	2	MVI	B,3	CALL	SPRNT	POP	H	LXI	D,102H	DAD	D	CALL	VCSETY	POP	H	MVI	B,2	CALL	WPRINT	CALL	CCPRES	CALL	KEY	PUSH	PSW	CALL	WPOP	POP	PSW	RETFILL:	MOV	M,C	INX	H	DCR	B	JNZ	FILL	RETREN:	LDA	WFILE	ANA	A	JZ	BEG12	LDA	SMFL	PUSH	PSW	LDA	NFILE	PUSH	PSW	CALL	MSEAR	JNZ	RENG	POP	PSW	PUSH	PSW	LXI	H,SMFL	ADD	M	STA	NFILE	CALL	GTFILE	CALL	RENAFREN02:	LDA	NPANL	ANA	A	JZ	REN10	CALL	RDIR	JMP	REN12REN10:	CALL	LDIRREN12:	CALL	CHPAR	POP	PSW	STA	NFILE	POP	PSW	STA	SMFL	JMP	BEG10RENAF:	SHLD	FSIZE	LXI	D,5CH	MVI	B,9	RST	3	MOV	A,M	ANA	A	PUSH	PSW	MVI	B,3	RST	3	POP	PSW	JM	RENN	LXI	H,STRR	CALL	RENA10	JMP	RENA12RENA10:	PUSH	H	LXI	H,1E09H	PUSH	H	LXI	D,616H	CALL	WPUSH	LXI	D,514H	XRA	A	CALL	WINDOW	POP	H	PUSH	H	MVI	A,6	ADD	H	MOV	H,A	CALL	VCSETY	POP	H	XTHL	CALL	PRINT	POP	H	PUSH	H	LXI	D,101H	DAD	D	CALL	VCSETY	LXI	H,STRR0	CALL	PRINT	LXI	H,5DH	MVI	B,8	CALL	SPRNT	MVI	C,'.'	RST	2	MVI	B,3	CALL	SPRNT	POP	H	PUSH	H	LXI	D,102H	DAD	D	CALL	VCSETY	LXI	H,STRR1	MVI	B,2	CALL	WPRINT	POP	H	LXI	D,403H	DAD	D	SHLD	VOPXY	LXI	H,80H	MVI	M,12	SHLD	VPPAR0	INX	H	LXI	B,0C20H	CALL	FILL	MVI	D,0	CALL	WINP	PUSH	PSW	CALL	WPOP	POP	PSW	RETRENA12:	JC	REN98	LXI	H,80H	MOV	B,M	INX	H	MOV	A,M	CPI	20H	JZ	REN98	LXI	D,6CH	XRA	A	STAX	D	INX	D	MVI	C,8	CALL	MARK22	MVI	C,3	CALL	MARK22	LXI	D,6CH	CALL	FSEAR	CPI	4	JC	REN97	LHLD	FSIZE	XCHG	LXI	H,6DH	INX	D	MVI	B,11	RST	3	LXI	D,5CH	XRA	A	STAX	D	CALL	RENF	XRA	A	RETREN97:	LXI	H,SREN0	CALL	MESS	STC	RETRENN:	LXI	H,SREN	CALL	MESSREN98:	STC	RETMOVE:	LDA	WFILE	ANA	A	JZ	BEG12	CALL	MSEAR	JZ	BEG12	PUSH	H	PUSH	B	LXI	H,STRMV	SHLD	FSIZE	LDA	TUSER	MOV	E,A	PUSH	D	CALL	CHUS0	LXI	H,TUSER	MOV	A,M	POP	D	STA	CUSER	MOV	M,E	JNC	MOVE10MOVE02:	POP	B	POP	H	JMP	BEG12MOVE10:	LXI	D,80H	CALL	SETDMA	LXI	H,TUSER	LDA	CUSER	CMP	M	JZ	MOVE02	POP	B	POP	HMOVE12:	PUSH	H	PUSH	B	LXI	D,-7	DAD	D	LXI	D,5CH	PUSH	D	XRA	A	STAX	D	INX	D	MVI	B,11	RST	3	LDA	CUSER	MOV	E,A	CALL	GUSER	POP	D	PUSH	D	CALL	FSEAR	PUSH	PSW	LDA	TUSER	MOV	E,A	CALL	GUSER	POP	PSW	CPI	4	JC	NMOVE	POP	D	MVI	A,'?'	STA	68H	CALL	FSEARMOVE13:	ADD	A	ADD	A	ADD	A	ADD	A	ADD	A	ADI	80H	MOV	L,A	MVI	H,0	LDA	CUSER	MOV	M,A	MVI	C,1	CALL	FWRITE	CALL	NSEAR	CPI	4	JC	MOVE13MOVE14:	POP	B	POP	H	LXI	D,14	DAD	D	DCR	B	JZ	MOVE20	CALL	MSEA10	JNZ	MOVE12MOVE20:	JMP	CHDIRNMOVE:	POP	D	LXI	H,SMOV	CALL	MESS	JMP	MOVE14RENCOP:	MVI	A,-1	JMP	COP00COP:	XRA	ACOP00:	STA	MODCOP	LDA	WFILE	ANA	A	JZ	BEG12	LDA	SMFL	PUSH	PSW	LDA	NFILE	PUSH	PSW	CALL	MSEAR	JNZ	COPG	POP	PSW	PUSH	PSW	LXI	H,SMFL	ADD	M	STA	NFILE	CALL	GTFILE	CALL	COPFCOP02:	LDA	NPANL	ANA	A	JZ	COP10	CALL	LDIR	JMP	COP12COP10:	CALL	RDIRCOP12:	CALL	CHPAR	POP	PSW	STA	NFILE	POP	PSW	STA	SMFL	CALL	CCPRES	JMP	BEG12COPG:	PUSH	H	PUSH	B	LXI	D,-8	DAD	D	CALL	COPF	POP	B	POP	H	JC	COP02	LXI	D,14	DAD	D	DCR	B	JZ	COP02	CALL	MSEA10	JNZ	COPG	JMP	COP02RENG:	PUSH	H	PUSH	B	LXI	D,-8	DAD	D	CALL	RENAF	POP	B	POP	H	LXI	D,14	DAD	D	DCR	B	JZ	REN02	CALL	MSEA10	JNZ	RENG	JMP	REN02RNCOP:	LXI	H,STRNCP	CALL	RENA10	RC	LXI	H,80H	MOV	B,M	INX	H	MOV	A,M	CPI	20H	RZ	LXI	D,RNCPBF	MVI	C,8	CALL	MARK22	MVI	C,3	CALL	MARK22	RETCOPF:	LXI	D,5CH	PUSH	D	MVI	B,8	RST	3	MOV	A,M	ANI	7FH	STAX	D	INX	H	INX	D	MVI	B,3	RST	3	MOV	E,M	INX	H	MOV	D,M	XCHG	SHLD	WSECT	LXI	H,5DH	LXI	D,RNCPBF	MVI	B,11	RST	3	LDA	MODCOP	ANA	A	CNZ	RNCOP	POP	H	PUSH	H	LXI	D,CBUF	MVI	B,9	RST	3	XCHG	MVI	A,'$'	MOV	M,A	INX	H	MOV	M,A	INX	H	MOV	M,A	INX	H	CALL	CLEAR+3	CALL	CLEAR	LDA	NPANL	ANA	A	JNZ	COPF10	LDA	RDISK	STA	CBUF	LDA	RUSER	STA	CUSER	JMP	COPF12COPF10:	LDA	LDISK	STA	CBUF	LDA	LUSER	STA	CUSERCOPF12:	LDA	CBUF	STA	RNCPBF-1	LDA	CUSER	MOV	E,A	CALL	GUSER	LXI	D,80H	CALL	SETDMA	LXI	H,5CH	LXI	D,RNCPBF-1	MVI	B,12	PUSH	H	PUSH	D	CALL	SWP	LXI	D,5CH	CALL	FSEAR	CPI	4	CC	NCOPF	POP	D	POP	H	MVI	B,12	CALL	SWP	LDA	TDISK	STA	5CH	LXI	D,CBUF	PUSH	D	CALL	ERAF	POP	D	CALL	MAKEF	PUSH	PSW	LDA	TUSER	MOV	E,A	CALL	GUSER	POP	PSW	POP	D	CPI	4	JNC	COPF60	CALL	OPENFCOPF20:	LHLD	WSECT	MOV	A,H	ORA	L	JZ	COPF99	XRA	A	CMP	H	JNZ	COPF21	MOV	A,L	CPI	0F1H	JC	COPF22COPF21:	LXI	D,-0F0H	DAD	D	MVI	A,0F0H	STA	CSECT	JMP	COPF23COPF22:	MOV	A,L	STA	CSECT	MVI	L,0COPF23:	SHLD	WSECT	LDA	TUSER	MOV	E,A	CALL	GUSER	LDA	CSECT	MOV	B,A	LXI	D,MBUF	PUSH	D	PUSH	BCOPF30:	PUSH	B	PUSH	D	CALL	SETDMA	LXI	D,5CH	CALL	SREAD	POP	D	LXI	H,128	DAD	D	XCHG	POP	B	DCR	B	JNZ	COPF30	LDA	CUSER	MOV	E,A	CALL	GUSER	POP	B	POP	DCOPF40:	PUSH	B	PUSH	D	CALL	SETDMA	LXI	D,CBUF	CALL	SWRITE	POP	D	LXI	H,128	DAD	D	XCHG	POP	B	ANA	A	JNZ	COPF50	DCR	B	JNZ	COPF40	JMP	COPF20COPF50:	LXI	D,CBUF	CALL	ERAF	LXI	H,SNMEST	CALL	MESS	STC	RETCOPF60:	LXI	H,SNOTKR	CALL	MESS	STC	RETCOPF99:	LXI	D,CBUF	PUSH	D	CALL	CLOSEF	LXI	H,RNCPBF	LXI	D,CBUF+16	XRA	A	STAX	D	INX	D	MVI	B,11	RST	3	POP	D	CALL	RENF	ANA	A	RETNCOPF:	LXI	H,SCOP	CALL	MESS	CPI	13	JNZ	NCPF10	XRA	A	STA	5CH	LDA	CBUF	DCR	A	MOV	E,A	CALL	SELDSK	LXI	H,5CH	CALL	DELF	PUSH	PSW	LDA	TDISK	DCR	A	MOV	E,A	CALL	SELDSK	POP	PSW	RNCNCPF10:	POP	D	POP	D	POP	D	POP	D	RETDEL:	LDA	WFILE	ANA	A	JZ	BEG12	CALL	MSEAR	JNZ	DELG	LDA	NFILE	LXI	H,SMFL	ADD	M	STA	NFILE	CALL	GTFILE	CALL	DELF	JC	BEG12	JMP	CHDIRDELF:	LXI	D,5CH	PUSH	D	MVI	B,9	RST	3	MOV	A,M	ANA	A	PUSH	PSW	MVI	B,3	RST	3	POP	PSW	JM	DELF10	POP	D	XRA	A	STAX	D	CALL	ERAF	ANA	A	RETDELF10:	POP	D	LXI	H,SDEL	CALL	MESS	STC	RETDELG:	PUSH	H	PUSH	B	LXI	D,-8	DAD	D	CALL	DELF	POP	B	POP	H	LXI	D,14	DAD	D	DCR	B	JZ	DELG10	CALL	MSEA10	JNZ	DELGDELG10:	JMP	CHDIRMSEAR:	LHLD	BDIR	LDA	WFILE	MOV	B,A	LXI	D,8	DAD	D	LXI	D,14MSEA10:	MOV	A,M	ANA	A	RM	DAD	D	DCR	B	JNZ	MSEA10	RETCNTRL:	CPI	20H	JNC	$+5	ORI	40H	CPI	'M'	JZ	MARK	CPI	'O'	JZ	SHWSCR	JMP	BEG12SHWSCR:	CALL	SPODEK	CALL	LOASCR	CALL	KEY	CALL	LPODEK	JMP	BEG12SPODEK:	DI	LDA	15	OUT	10H	LHLD	BSDSPR	LXI	D,SVDSP2	MVI	B,3	RST	3	LXI	B,22	DAD	B	MOV	A,M	STAX	D	LXI	H,0	DAD	SP	SHLD	SPDK12+1	MVI	A,1CH	OUT	10H	LXI	H,0E000H	SPHL	LXI	B,1000HSPDK10:	DCX	H	MOV	D,M	DCX	H	MOV	E,M	PUSH	D	DCX	H	MOV	D,M	DCX	H	MOV	E,M	PUSH	D	DCX	B	MOV	A,C	ORA	B	JNZ	SPDK10SPDK12:	LXI	SP,0	LDA	3CH	OUT	10H	EI	RETLPODEK:	DI	LDA	15	OUT	10H	LHLD	BSDSPR	LXI	D,SVDSP2	XCHG	MVI	B,3	RST	3	LXI	B,22	XCHG	DAD	B	LDAX	D	MOV	M,A	LXI	H,0	DAD	SP	SHLD	LPDK12+1	MVI	A,1CH	OUT	10H	LXI	H,0A000H	SPHL	LXI	B,1000HLPDK10:	POP	D	MOV	M,E	INX	H	MOV	M,D	INX	H	POP	D	MOV	M,E	INX	H	MOV	M,D	INX	H	DCX	B	MOV	A,C	ORA	B	JNZ	LPDK10LPDK12:	LXI	SP,0	LDA	3CH	OUT	10H	EI	RETMARK:	LHLD	BCUR	LXI	D,0A07H	DAD	D	PUSH	H	LXI	D,512H	CALL	WPUSH	LXI	D,410H	XRA	A	CALL	WINDOW	POP	H	PUSH	H	MVI	A,5	ADD	H	MOV	H,A	CALL	VCSETY	LXI	H,STRM	CALL	PRINT	POP	H	PUSH	H	LXI	D,101H	DAD	D	CALL	VCSETY	LXI	H,STRMR	MVI	B,2	CALL	WPRINT	POP	H	LXI	D,202H	DAD	D	SHLD	VOPXY	LXI	H,80H	MVI	M,12	SHLD	VPPAR0	INX	H	LXI	B,0C20H	CALL	FILL	MVI	D,0	CALL	WINP	JC	MARK99	LXI	H,80H	MOV	B,M	INX	H	MOV	A,M	PUSH	PSW	LXI	D,STRMS	MVI	C,8	CALL	MARK22	MVI	C,3	CALL	MARK22	CALL	WPOP	LHLD	BDIR	LDA	WFILE	MOV	B,A	INR	B	INX	H	POP	PSWMARK30:	DCR	B	JZ	MARK40	PUSH	B	PUSH	H	PUSH	PSW	CALL	MARK32	POP	PSW	POP	H	LXI	D,14	DAD	D	POP	B	JMP	MARK30MARK40:	LDA	NFILE	MOV	E,A	XRA	A	JMP	LEFT20MARK32:	MVI	B,11	CPI	20H	JZ	MARK50	LXI	D,STRMS	PUSH	HMARK33:	LDAX	D	CPI	'?'	JZ	MARK34	XCHG	LDAX	D	ANI	7FH	CMP	M	XCHG	JNZ	MARK36MARK34:	INX	H	INX	D	DCR	B	JNZ	MARK33	POP	H	LXI	D,7	DAD	D	MOV	A,M	XRI	80H	MOV	M,A	RETMARK36:	POP	H	RETMARK50:	LXI	D,7	DAD	D	MOV	A,M	ANI	7FH	MOV	M,A	RETMARK99:	CALL	WPOP	JMP	BEG12STRMS:	DB '???????????'MARK22:	INR	BMARK23:	DCR	B	JZ	MARK24	MOV	A,M	INX	H	CPI	'.'	JZ	MARK24	CPI	'*'	JZ	MARK25	STAX	D	INX	D	DCR	C	JNZ	MARK23MARK27:	MOV	A,M	CPI	'.'	RNZ	INX	H	RETMARK25:	MVI	A,'?'	JMP	MARK24+2MARK24:	MVI	A,20HMARK26:	STAX	D	INX	D	DCR	C	JNZ	MARK26	JMP	MARK27INS:	LDA	WFILE	ANA	A	JZ	BEG12	LDA	NFILE	PUSH	PSW	LXI	H,SMFL	ADD	M	STA	NFILE	CALL	GTFILE	POP	PSW	STA	NFILE	LXI	D,8	DAD	D	MOV	A,M	XRI	80H	MOV	M,A	CALL	PRMARK	JMP	BEG10PMARK:	LXI	H,0	SHLD	DMRFL	XRA	A	STA	WMRFL	LHLD	BDIR	LXI	D,8	DAD	D	LXI	D,14	LDA	WFILE	MOV	B,A	INR	BPMRK10:	DCR	B	RZ	MOV	A,M	RLC	JNC	PMRK12	PUSH	H	PUSH	D	LXI	D,4	DAD	D	MOV	E,M	INX	H	MOV	D,M	XCHG	CALL	INKB	MOV	A,L	RRC	JNC	PMRK14	LDA	TDISK	CPI	3	JZ	PMRK14	INX	HPMRK14:	XCHG	LHLD	DMRFL	DAD	D	SHLD	DMRFL	LXI	H,WMRFL	INR	M	POP	D	POP	HPMRK12:	DAD	D	JMP	PMRK10PRMARK:	CALL	PMARK	LHLD	BCUR	DCR	L	MVI	A,30	ADD	H	MOV	H,A	CALL	VCSETY	LDA	WMRFL	ANA	A	JZ	PRMR10	CALL	ONINV	LHLD	DMRFL	CALL	DDEC	MVI	C,'/'	RST	2	LDA	WMRFL	MOV	L,A	MVI	H,0	CALL	DDEC00	CALL	OFINV	JMP	CCPRESPRMR10:	LXI	B,89DH	CALL	DUBPRN	JMP	CCPRESCCPRES:	LHLD	CURCCP	SHLD	YY	JMP	VCSETCHD:	LHLD	BCUR	LXI	D,706H	DAD	D	LDA	TDISK	STA	CDISK	CALL	CHDSK	JNC	CHD10	JMP	BEG12CHD10:	LDA	CDISK	STA	TDISK	JMP	CHDIRCHDSK:	PUSH	H	LXI	D,511H	CALL	WPUSH	LXI	D,40FH	XRA	A	CALL	WINDOW	POP	H	PUSH	H	MVI	A,4	ADD	H	MOV	H,A	CALL	VCSETY	LXI	H,STRCD	CALL	PRINT	POP	H	PUSH	H	LXI	D,101H	DAD	D	CALL	VCSETY	LXI	H,STRCHD	MVI	B,2	CALL	WPRINT	POP	H	LXI	D,102H	DAD	DCHDS10:	PUSH	H	CALL	OFINV	CALL	CHDS20	CALL	CCPRESCHDS12:	CALL	KEY	CPI	27	JZ	CHDS14	CPI	8	JZ	CHDS16	CPI	18H	JZ	CHDS17	CPI	13	JNZ	CHDS12	POP	H	CALL	WPOP	XRA	A	RETCHDS14:	POP	H	CALL	WPOP	STC	RETCHDS16:	CALL	CHDS18	LXI	H,CDISK	DCR	M	JNZ	$+5	MVI	M,3	POP	H	JMP	CHDS10CHDS17:	CALL	CHDS18	LXI	H,CDISK	INR	M	MOV	A,M	CPI	4	JC	$+5	MVI	M,1	POP	H	JMP	CHDS10CHDS18:	POP	D	POP	H	PUSH	H	PUSH	D	CALL	ONINV	JMP	CHDS20CHDS20:	LDA	CDISK	DCR	A	MOV	C,A	ADD	A	ADD	C	INR	H	ADD	H	MOV	H,A	CALL	VCSETY	CALL	SPACE	LDA	CDISK	ADI	40H	MOV	C,A	RST	2	JMP	SPACESPACE:	MVI	C,20H	JMP	PRINTCCHUS:	LXI	H,STRU	SHLD	FSIZE	CALL	CHUS0	JNC	CHDIR	CALL	CCPRES	JMP	BEG12CHUS0:	LHLD	BCUR	LXI	D,706H	DAD	D	PUSH	H	LXI	D,519H	CALL	WPUSH	LXI	D,417H	XRA	A	CALL	WINDOW	POP	H	PUSH	H	MVI	A,8	ADD	H	MOV	H,A	CALL	VCSETY	LHLD	FSIZE	CALL	PRINT	POP	H	LXI	D,201H	DAD	D	CALL	VCSETY	LXI	H,STRUZ	MVI	B,2	CALL	WPRINT	LHLD	YY	DCR	L	MVI	A,15	ADD	H	MOV	H,A	CALL	VCSETY	LDA	TUSER	STA	WUSERCHUS10:	LDA	WUSER	CPI	10	JC	$+5	ADI	7	ADI	30H	MOV	C,A	RST	2	CALL	BACKCHUS12:	CALL	KEY	CPI	27	JZ	CHUS20	CPI	13	JZ	CHUS14	CPI	30H	JC	CHUS12	CPI	'G'	JNC	CHUS12	CPI	3AH	JC	CHUS13	CPI	'A'	JC	CHUS12	SUI	7CHUS13:	SUI	30H	STA	WUSER	JMP	CHUS10CHUS14:	CALL	WPOP	LDA	WUSER	STA	TUSER	ANA	A	RETCHUS20:	CALL	WPOP	STC	RETWPRINT:	XCHG	LHLD	YY	XCHGWPRN10:	CALL	PRINT	INX	H	XCHG	INR	L	SHLD	YY	PUSH	H	CALL	VCSET	POP	H	XCHG	DCR	B	JNZ	WPRN10	RETWINDOW:	ORI	14	MOV	C,A	RST	2	LXI	H,998BH	LXI	B,189DH	CALL	WIND20WIND10:	LXI	H,8A8AH	LXI	B,0AD20H	CALL	WIND20	MOV	A,D	CPI	1	JNZ	WIND10	LXI	H,988CH	LXI	B,0AD9DH	CALL	WIND20	LDA	INVSYM	ORI	14	MOV	C,A	RST	2	MVI	C,18H	RST	2	MOV	B,E	MVI	C,0ACH	CALL	DUBPRN	MVI	C,0ADH	JMP	PRINTCWIND20:	PUSH	D	XCHG	LHLD	YY	XTHL	XCHG	PUSH	D	PUSH	B	MOV	C,H	RST	2	MOV	A,E	SUI	2	POP	B	PUSH	B	MOV	B,A	CALL	DUBPRN	MOV	C,L	RST	2	LDA	INVSYM	ORI	14	MOV	C,A	RST	2	CALL	SPACE	POP	B	MOV	C,B	RST	2	LDA	INVSYM	ORI	14	MOV	C,A	RST	2	POP	H	XTHL	INR	L	CALL	VCSETY	POP	D	DCR	D	RETWPOP:	CALL	CCPRES	LHLD	WPAR	MOV	B,H	MOV	C,L	LHLD	VXY	LXI	D,WBUF	DI	XRA	A	OUT	10HWPOP10:	PUSH	H	PUSH	BWPOP12:	PUSH	H	LDAX	D	MOV	M,A	INX	D	MVI	A,20H	ADD	H	MOV	H,A	LDAX	D	MOV	M,A	INX	D	POP	H	INR	H	DCR	C	JNZ	WPOP12	POP	B	POP	H	DCR	L	DCR	B	JNZ	WPOP10	LDA	3CH	OUT	10H	EI	RETGTDSPR:	PUSH	H	PUSH	D	PUSH	PSW	DI	MVI	A,20H	OUT	10H	LHLD	0A002H	LXI	D,1EH	DAD	D	MOV	E,M	INX	H	MOV	D,M	POP	PSW	XCHG	SHLD	BSDSPR	CALL	HLA	MOV	E,M	LDA	3CH	OUT	10H	MOV	A,E	POP	D	POP	H	EI	RETHLA:	ADD	L	MOV	L,A	RNC	INR	H	RETWPUSH:	SHLD	YY	CALL	VCSET	LDA	YY+1	MOV	H,A	ADD	A	ADD	H	RRC	RRC	RRC	ANI	1FH	ADI	0A1H	MOV	H,A	MVI	A,2	CALL	GTDSPR	MOV	L,A	SHLD	VXY	MOV	A,E	ADD	A	ADD	E	RRC	RRC	RRC	ANI	1FH	INR	A	MOV	E,A	MOV	A,D	ADD	A	MOV	D,A	ADD	A	ADD	A	ADD	D	MOV	D,A	XCHG	SHLD	WPAR	LXI	B,WBUF	XCHG	XRA	A	DI	OUT	10HWPSH10:	PUSH	H	PUSH	DWPSH12:	PUSH	H	MOV	A,M	STAX	B	INX	B	MVI	A,20H	ADD	H	MOV	H,A	MOV	A,M	STAX	B	INX	B	POP	H	INR	H	DCR	E	JNZ	WPSH12	POP	D	POP	H	DCR	L	DCR	D	JNZ	WPSH10	LDA	3CH	OUT	10H	EI	RETZAB:	LHLD	CURCCP	MOV	A,H	CPI	3	JZ	BEG12	CALL	OFINV	CALL	BACK	CALL	SPACE	CALL	BACK	LHLD	CURCCP	DCR	H	SHLD	CURCCP	LHLD	FORBAT	DCX	H	SHLD	FORBAT	JMP	BEG12CHDIR:	LDA	NPANL	ANA	A	JZ	CHDR10	LDA	TUSER	STA	RUSER	LDA	TDISK	STA	RDISK	XRA	A	STA	RNFILE	STA	RSMFL	CALL	RDIR	JMP	ST10CHDR10:	LDA	TUSER	STA	LUSER	LDA	TDISK	STA	LDISK	XRA	A	STA	LNFILE	STA	LSMFL	CALL	LDIR	JMP	ST10CHPAN:	CALL	NORDSK	LXI	H,NPANL	MOV	A,M	XRI	1	MOV	M,A	JZ	CHPN10	LDA	NFILE	STA	LNFILE	LDA	SMFL	STA	LSMFL	JMP	CHPN12CHPN10:	LDA	NFILE	STA	RNFILE	LDA	SMFL	STA	RSMFLCHPN12:	CALL	NORFL	CALL	CHPAR	CALL	PRMARK	JMP	BEGINCHPAR:	LDA	NPANL	ANA	A	JNZ	CHPR10	LDA	LDISK	STA	TDISK	DCR	A	MOV	E,A	PUSH	PSW	CALL	SELDSK	LDA	LUSER	STA	TUSER	PUSH	PSW	MOV	E,A	CALL	GUSER	POP	PSW	RRC	RRC	RRC	RRC	MOV	E,A	POP	PSW	ORA	E	STA	4	LXI	H,BCURL	SHLD	BCUR	LXI	H,DIRBL	SHLD	BDIR	LDA	LWFILE	STA	WFILE	LDA	LNFILE	STA	NFILE	LDA	LSMFL	STA	SMFL	RETCHPR10:	LDA	RDISK	STA	TDISK	DCR	A	MOV	E,A	PUSH	PSW	CALL	SELDSK	POP	PSW	STA	4	LDA	RUSER	STA	TUSER	MOV	E,A	CALL	GUSER	LDA	RNFILE	STA	NFILE	LXI	H,BCURR	SHLD	BCUR	LXI	H,DIRBR	SHLD	BDIR	LDA	RWFILE	STA	WFILE	LDA	RSMFL	STA	SMFL	RETLEFT:	LDA	NFILE	SUI	17	MOV	E,A	JC	LEFT1FLEFT10:	PUSH	PSW	CALL	NORFL	POP	PSW	STA	NFILE	JMP	BEG10LEFT1F:	MVI	A,-17LEFT20:	MOV	C,A	LDA	SMFL	ADD	C	JM	BEG12	STA	SMFL	MOV	B,A	LDA	NFILE	PUSH	PSW	MOV	A,B	STA	NFILE	PUSH	D	CALL	OUTDIR	CALL	PRMARK	POP	D	POP	PSW	STA	NFILE	LXI	H,BEG10	PUSH	H	LXI	H,NFILE	MOV	A,E	CPI	51	MOV	M,A	RC	ANA	A	JM	$+7	SUI	17	MOV	M,A	RET	ADI	17	MOV	M,A	RETRIGHT:	LDA	NFILE	ADI	17	MOV	E,ARGHT05:	CPI	51	JNC	RGHT10	LXI	H,SMFL	MOV	C,A	ADD	M	LXI	H,WFILE	CMP	M	MOV	A,C	JNC	BEG12	JMP	LEFT10RGHT10:	MOV	C,A	LXI	H,SMFL	ADD	M	LXI	H,WFILE	CMP	M	MOV	A,C	JNC	BEG12	MVI	A,17	JMP	LEFT20UP:	LDA	NFILE	DCR	A	MOV	E,A	JM	LEFT1F	JMP	LEFT10DOWN:	LDA	NFILE	INR	A	MOV	E,A	JMP	RGHT05CCPOUT:	PUSH	H	LHLD	CURCCP	SHLD	YY	INR	H	SHLD	CURCCP	PUSH	B	CALL	VCSET	POP	B	LHLD	FORBAT	MOV	M,C	INX	H	SHLD	FORBAT	RST	2	POP	H	RETINVFL0:	CALL	SETDC	LDA	NFILE	PUSH	PSW	LXI	H,SMFL	ADD	M	STA	NFILE	CALL	GTFILE	POP	PSW	STA	NFILE	RETINVFL:	CALL	ONINV	CALL	INVFL0	LDA	WFILE	ANA	A	JNZ	INVF10INVF02:	LXI	B,0C20H	CALL	DUBPRN	JMP	OFINVINVF10:	CALL	OUTD19	JMP	OFINVNORFL:	CALL	INVFL0	CALL	OFINV	LDA	WFILE	ANA	A	JZ	INVF02	JMP	OUTD19OTBFL:	CALL	INVFL	LDA	NFILE	PUSH	PSW	LXI	H,SMFL	ADD	M	STA	NFILE	CALL	GTFILE	PUSH	H	LHLD	BCUR	MVI	A,18	ADD	L	MOV	L,A	CALL	VCSETY	POP	H	POP	PSW	STA	NFILE	LDA	WFILE	ANA	A	JNZ	OTBF00	LXI	B,1620H	JMP	DUBPRNOTBF00:	INX	H	MVI	B,8	CALL	SPRNT	CALL	SPACE	MVI	B,3	CALL	SPRNT	LXI	B,618H	CALL	DUBPRN	MOV	E,M	INX	H	MOV	D,M	XCHG	CALL	INKB	JMP	DDECINKB:	PUSH	D	MVI	D,0	MVI	E,3INKB10:	ANA	A	MOV	A,H	RAR	MOV	H,A	MOV	A,L	RAR	MOV	L,A	MVI	A,0	RAL	ORA	D	MOV	D,A	DCR	E	JNZ	INKB10	MOV	A,D	ANA	A	JZ	$+4	INX	H	POP	D	RETFUNKEY:	LXI	H,24	CALL	VCSETY	LXI	H,STRF	MVI	E,10FUNK10:	CALL	OFINV	MVI	B,2	CALL	PRNTN	CALL	ONINV	MVI	B,6	CALL	PRNTN	DCR	E	JNZ	FUNK10	CALL	OFINV	RETFNKEY2:	LXI	H,24	CALL	VCSETY	LXI	H,STRF2	MVI	E,10	JMP	FUNK10LDIR:	LXI	H,BCURL	SHLD	BCUR	LXI	H,DIRBL	SHLD	BDIR	LDA	LDISK	STA	TDISK	LDA	LUSER	STA	TUSER	CALL	DIR	CALL	SORTLDIR10:	LXI	H,WFILE	MOV	A,M	STA	LWFILE	CPI	51	JC	$+5	MVI	M,51	XRA	A	STA	NFILE	CALL	OUTDIR	LDA	LWFILE	STA	WFILE	CALL	INFORM	XRA	A	STA	LSMFL	RETRDIR:	LXI	H,BCURR	SHLD	BCUR	LXI	H,DIRBR	SHLD	BDIR	LDA	RDISK	STA	TDISK	LDA	RUSER	STA	TUSER	CALL	DIR	CALL	SORTRDIR10:	LXI	H,WFILE	MOV	A,M	STA	RWFILE	CPI	51	JC	$+5	MVI	M,51	XRA	A	STA	NFILE	CALL	OUTDIR	LDA	RWFILE	STA	WFILE	CALL	INFORM	XRA	A	STA	RSMFL	RETINFORM:	LHLD	BCUR	DCR	H	MVI	A,21	ADD	L	MOV	L,A	SHLD	YY	CALL	VCSET	LXI	B,0D80H	CALL	5	LXI	B,180H	CALL	5	MOV	A,E	SUB	L	MOV	C,A	MOV	A,D	SBB	H	MOV	B,A	PUSH	H	PUSH	B	LXI	H,STRI	CALL	INFR10	INX	H	POP	D	CALL	INFR10	INX	H	POP	D	CALL	INFR10	INX	H	CALL	PRINT	CALL	NORDSK	LHLD	BCUR	LXI	D,0D12H	DAD	D	CALL	VCSETY	LXI	H,STR1	CALL	PRINT	LDA	WFILE	MVI	H,0	MOV	L,A	CALL	DDEC00	LHLD	BCUR	MVI	A,4	ADD	H	MOV	H,A	DCR	L	CALL	VCSETY	CALL	SHWHDD	JMP	PRMARKINFR10:	PUSH	D	PUSH	B	CALL	PRINT	PUSH	H	XCHG	CALL	DDEC	POP	H	POP	B	POP	D	RETDDEC:	LXI	B,-1000	CALL	DDEC10DDEC00:	LXI	B,-100	CALL	DDEC10	LXI	B,-10	CALL	DDEC10	MOV	A,LDDEC02:	ADI	30H	MOV	C,A	JMP	PRINTCDDEC10:	MVI	E,0DDEC12:	PUSH	H	DAD	B	JNC	DDEC14	INR	E	XTHL	POP	H	JMP	DDEC12DDEC14:	POP	H	MOV	A,E	JMP	DDEC02GTFILE:	LDA	NFILE	MOV	L,A	MVI	H,0	DAD	H	MOV	B,H	MOV	C,L	DAD	H	DAD	B	DAD	H	DAD	B	XCHG	LHLD	BDIR	DAD	D	RETOUTDIR:	LHLD	BCUR	DCR	H	LXI	H,0A1FFH-20	JZ	$+6	LXI	H,0B0FFH-20	CALL	STIR	CALL	OUTD20	LHLD	BCUR	CALL	VCSETYOUTD10:	XRA	A	CALL	OUTD12	MVI	C,18H	RST	2	LDA	NFILE	PUSH	PSW	MVI	A,17	CALL	OUTD12	JNC	OUTD11	MVI	C,18H	RST	2	MVI	A,17	CALL	OUTD12OUTD11:	POP	PSW	INR	A	STA	NFILE	LDA	YY	CPI	18	JZ	OUTD20	LXI	H,NFILE	LDA	WFILE	CMP	M	PUSH	PSW	LHLD	YY	INR	L	CALL	VCSETY	POP	PSW	JNC	OUTD10	RETOUTD20:	LHLD	BCUR	DCR	H	PUSH	H	CALL	VCSETY	LXI	B,118AH	CALL	VLIN10	POP	H	MVI	A,13	ADD	H	MOV	H,A	PUSH	H	CALL	VCSETY	LXI	B,1183H	CALL	VLIN10	POP	H	MVI	A,13	ADD	H	MOV	H,A	PUSH	H	CALL	VCSETY	LXI	B,1183H	CALL	VLIN10	POP	H	MVI	A,13	ADD	H	MOV	H,A	CALL	VCSETY	LXI	B,118AH	CALL	VLIN10	RETOUTD12:	LXI	H,NFILE	ADD	M	LXI	D,WFILE	XCHG	CMP	M	RNC	XCHG	MOV	M,A	CALL	GTFILE	CALL	OUTD19	STC	RETOUTD19:	MVI	B,7	INX	H	CALL	SPRNT	MOV	A,M	MOV	C,A	INX	H	ANI	80H	PUSH	PSW	MOV	A,C	ANI	7FH	MOV	C,A	RST	2	POP	PSW	MVI	C,20H	JZ	$+5	MVI	C,082H	RST	2	MVI	B,3	CALL	SPRNT	RETPRNTN:	MOV	C,M	INX	H	RST	2	DCR	B	JNZ	PRNTN	RETSPRNT:	MOV	A,M	ANI	7FH	MOV	C,A	INX	H	RST	2	DCR	B	JNZ	SPRNT	RETSETDC:	PUSH	H	LHLD	BCUR	LDA	NFILE	LXI	D,0D00HSTDC10:	CPI	17	JC	STDC12	DAD	D	SUI	17	JMP	STDC10STDC12:	ADD	L	MOV	L,A	SHLD	YY	CALL	VCSET	POP	H	RETSTR?:	DB 0,'???????????'STIR:	DI	XRA	A	OUT	10H	MVI	B,170	LXI	D,2000HSTIR10:	PUSH	H	MVI	C,15STIR12:	PUSH	H	MVI	M,0	DAD	D	MVI	M,0	POP	H	INR	H	DCR	C	JNZ	STIR12	POP	H	DCR	L	DCR	B	JNZ	STIR10	LDA	3CH	OUT	10H	EI	RETDIR:	LXI	D,5CH	PUSH	D	LXI	H,STR?	MVI	B,12	RST	3	MVI	C,15	RST	2	XRA	A	STA	WFILE	LHLD	BDIR	SHLD	TBDIR	CALL	CLEAR	MVI	A,'?'	STA	68H	LXI	D,128	CALL	SETDMA	LDA	TDISK	DCR	A	MOV	E,A	CALL	SELDSK	LDA	TUSER	MOV	E,A	CALL	GUSER	POP	D	LXI	H,0	SHLD	FSIZE	CALL	FSEARDIR10:	CPI	-1	JZ	DIR20	ADD	A	ADD	A	ADD	A	ADD	A	ADD	A	ADI	80H	MOV	E,A	MVI	D,0	LHLD	TBDIR	XCHG	MVI	B,12	RST	3	INX	H	INX	H	INX	H	MOV	A,M	JMP	DIR14HEXOUT:	PUSH	PSW	RRC	RRC	RRC	RRC	CALL	HEX10	POP	PSWHEX10:	ANI	15	CPI	10	JC	$+5	ADI	7	ADI	30H	MOV	C,A	JMP	PRINTCPRINTH:	MOV	A,H	CALL	HEXOUT	MOV	A,L	JMP	HEXOUTDIR14:	CALL	DIR16	LHLD	FSIZE	XCHG	MOV	M,E	INX	H	MOV	M,D	INX	H	SHLD	TBDIR	LXI	H,WFILE	INR	M	LXI	H,0	SHLD	FSIZE	CALL	NSEAR	JMP	DIR10DIR16:	PUSH	H	LHLD	FSIZE	MOV	C,A	MVI	B,0	DAD	B	SHLD	FSIZE	POP	H	RETPRUSR:	LHLD	BCUR	DCR	L	MVI	A,14	ADD	H	MOV	H,A	SHLD	YY	CALL	VCSET	LDA	TDISK	ADI	40H	STA	STR0+1	LDA	TUSER	CPI	10	JC	$+5	ADI	7	ADI	30H	STA	STR0+8	LXI	H,STR0	CALL	PRINT	RETDIR20:	LDA	WFILE	ANA	A	RZ	DCR	A	RZ	STA	NFILE	LHLD	BDIRDIR2F:	PUSH	H	LDA	NFILE	STA	SMFL	PUSH	H	LXI	D,14	DAD	D	SHLD	FSIZE	POP	HDIR30:	PUSH	H	MOV	D,H	MOV	E,L	LHLD	FSIZE	MVI	B,12DIR32:	LDAX	D	CMP	M	JNZ	DIR40	INX	H	INX	D	DCR	B	JNZ	DIR32	MOV	C,M	INX	H	MOV	B,M	INX	H	PUSH	H	XCHG	MOV	E,M	INX	H	MOV	D,M	XCHG	DAD	B	XCHG	MOV	M,D	DCX	H	MOV	M,E	POP	D	LHLD	FSIZE	XCHG	LDA	SMFL	MOV	B,ADIR34:	MVI	C,14DIR35:	MOV	A,M	STAX	D	INX	H	INX	D	DCR	C	JNZ	DIR35	DCR	B	JNZ	DIR34	LXI	H,WFILE	DCR	M	LXI	H,NFILE	DCR	M	LHLD	FSIZE	LXI	D,-14	DAD	D	SHLD	FSIZEDIR40:	LHLD	FSIZE	LXI	D,14	DAD	D	SHLD	FSIZE	POP	D	LXI	H,SMFL	MOV	A,M	ANA	A	JZ	DIR42	DCR	M	XCHG	JNZ	DIR30DIR42:	POP	H	LXI	D,14	DAD	D	XCHG	LXI	H,NFILE	MOV	A,M	ANA	A	RZ	DCR	M	XCHG	JNZ	DIR2F	RETCLEAR:	LXI	H,68H	LXI	B,24CL10:	MOV	M,B	INX	H	DCR	C	JNZ	CL10	RETCOPY:	MOV	A,M	STAX	D	INX	H	INX	D	DCR	B	JNZ	COPY	RETSCOPY:	MOV	A,M	ANI	7FH	STAX	D	INX	H	INX	D	DCR	B	JNZ	SCOPY	RETPANELS:	LXI	H,1	SHLD	YY	CALL	PANEL	LXI	H,2801H	SHLD	YY	JMP	PANELPANEL:	LHLD	YY	PUSH	H	PUSH	H	CALL	VCSET	MVI	C,99H	RST	2	MVI	A,3PANL02:	PUSH	PSW	LXI	B,0C9DH	CALL	HLIN10	MVI	C,'║'	RST	2	POP	PSW	DCR	A	JNZ	PANL02	CALL	BACK	MVI	C,8BH	RST	2	POP	H	MVI	A,19	ADD	L	MOV	L,A	PUSH	H	SHLD	YY	CALL	VCSET	CALL	VLINE	MVI	C,98H	RST	2	CALL	HLINE	MVI	C,8CH	RST	2	POP	H	MVI	A,39	ADD	H	MOV	H,A	SHLD	YY	CALL	VCSET	CALL	VLINE	POP	H	MVI	A,18	ADD	L	MOV	L,A	SHLD	YY	CALL	VCSET	MVI	C,97H	RST	2	MVI	A,3PANL10:	PUSH	PSW	MVI	B,12	CALL	HLINE2	MVI	C,91H	RST	2	POP	PSW	DCR	A	JNZ	PANL10	CALL	BACK	MVI	C,86H	JMP	PRINTCDUBPRN:	RST	2	DCR	B	JNZ	DUBPRN	RETHLINE2:	MVI	C,94H	RST	2	DCR	B	JNZ	HLINE2	RETVCSETY:	SHLD	YYVCSET:	LHLD	YY	MVI	A,20H	ADD	L	MOV	L,A	MVI	A,20H	ADD	H	MOV	H,A	SHLD	STRC+2	LXI	H,STRC	PUSH	B	MVI	B,4VCST10:	MOV	C,M	RST	2	INX	H	DCR	B	JNZ	VCST10	POP	B	RETSTRC:	DB 1BH,'Y',0,0HLINE:	LXI	B,269DHHLIN10:	RST	2	DCR	B	JNZ	HLIN10	RETVLINE:	LXI	B,18AHVLIN10:	RST	2	PUSH	B	MVI	C,1AH	RST	2	CALL	BACK	POP	B	DCR	B	JNZ	VLIN10	RETBACK:	MVI	C,8	JMP	PRINTCSAVSCR:	LXI	D,SVDSPR	LXI	H,SCRBUF	LXI	B,1000HSAVSC0:	PUSH	H	PUSH	B	PUSH	D	DI	LDA	15	OUT	10H	LHLD	BSDSPR	POP	D	MVI	B,3	RST	3	LXI	B,22	DAD	B	MOV	A,M	STAX	D	XRA	A	OUT	10H	LXI	H,0A000H	POP	B	POP	D	CALL	BCOPY	LDA	3CH	OUT	10H	EI	RETLOASCR:	LXI	H,SCRBUF	LXI	D,SVDSPR	LXI	B,1000HLOASC0:	PUSH	H	PUSH	B	PUSH	D	DI	LDA	15	OUT	10H	LHLD	BSDSPR	POP	D	XCHG	MVI	B,3	RST	3	XCHG	LXI	B,22	DAD	B	LDAX	D	MOV	M,A	XRA	A	OUT	10H	POP	B	POP	H	LXI	D,0A000H	CALL	BCOPY	LDA	3CH	OUT	10H	EI	HLT	RETBCOPY:	MOV	A,M	STAX	D	INX	H	INX	D	MOV	A,M	STAX	D	INX	H	INX	D	MOV	A,M	STAX	D	INX	H	INX	D	MOV	A,M	STAX	D	INX	H	INX	D	DCX	B	MOV	A,B	ORA	C	JNZ	BCOPY	RETPRINT:	MOV	A,M	CPI	'$'	RZ	PUSH	B	MOV	C,A	RST	2	POP	B	INX	H	JMP	PRINTPRINTC:	PUSH	H	PUSH	D	PUSH	B	PUSH	PSW	LDA	MODPRN	ANA	A	JNZ	PRNT10	MOV	A,C	CPI	14	JZ	PRNC0E	CPI	15	JZ	PRNC0F	MOV	E,A	MVI	C,2	CALL	5PRNT99:	POP	PSW	POP	B	POP	D	POP	H	RETPRNT10:	LHLD	MODPRA	MOV	M,C	INX	H	SHLD	MODPRA	JMP	PRNT99PRNC0E:	MVI	E,27	CALL	CONOUT	MVI	E,'b'	CALL	CONOUT	MVI	A,1	STA	INVSYM	JMP	PRNT99PRNC0F:	MVI	E,27	CALL	CONOUT	MVI	E,'a'	CALL	CONOUT	XRA	A	STA	INVSYM	JMP	PRNT99CONOUT:	MVI	C,2	JMP	5OUTSTR:	LDAX	D	CPI	'$'	RZ	INX	D	PUSH	D	MOV	E,A	CALL	CONOUT	POP	D	JMP	OUTSTRREZID:	LXI	B,0C80H	MVI	E,-1	CALL	5	INR	A	RZ	LXI	D,REZFIL	LXI	B,0B80H	CALL	5	RETREZFIL:	DB	3,'VC3     COM'YY:	DB	0XX:	DB	0TBDIR:	DW	0FSIZE:	DW	0VSEG:	DW	0CURCCP:	DW	0WPAR:	DW	0WSECT:	DW	0INVSYM:	DB	0CDISK:	DB	0CUSER:	DB	0CSECT:	DB	0VXY:	DW	0FORBAT:	DW	0VOPXY:	DW	0VPPAR0:	DW	0VPPAR1:	DW	0VPPAR2:	DW	0VPPAR3:	DW	0MODPRA:	DW	0MODPRN:	DB	0WUSER:	DB	0DMRFL:	DW	0WMRFL:	DB	0SPAR0:	DW	0SPAR1:	DW	0BSDSPR:	DW	0SVDSPR:	DS	4SVDSP2:	DS	4FLFNK:	DB	0MODCOP:	DB	0	DB	0RNCPBF:	DS	11CBUF:	DS	36CCPSTR:	DS	128