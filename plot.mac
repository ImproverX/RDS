	GLOBAL	@PLOT,@PLOTS,@XX,@YY,@XY	GLOBAL	@SCRMS,@STCOL,@SMASC,@COLOR	GLOBAL  @TABM,@PLTS0,@PLOTC,@PLTC0,@MASC8	GLOBAL	@TMSC8PUSHA	MACRO	PUSH	H	PUSH	D	PUSH	B	PUSH	PSW	ENDMPOPA	MACRO	POP	PSW	POP	B	POP	D	POP	H	ENDM@MASC8:	MVI	B,8	LXI	D,@TMSC8MSC8:	MOV	A,M	STAX	D	INX	H	INX	D	DCR	B	JNZ	MSC8	RET@TMSC8:	DW	-1,-1,-1,-1@COLOR:	DB	0@STCOL:	PUSHA	STA	@COLOR	ANI	15	CALL	XPL	POPA	RET@SMASC:	DB	0@SCRMS:	PUSHA	ANI	15	STA	@SMASC	CALL	IPL	POPA	RETXPL:	MOV	C,A	MVI	B,4	LXI	H,TBXPLXPL10:	MOV	E,M	INX	H	MOV	D,M	INX	H	MOV	A,C	RRC	MOV	C,A	MVI	A,0ABH	JNC	$+4	XRA	A	STAX	D	DCR	B	JNZ	XPL10	RETTBXPL:	DW	XPL3,XPL2,XPL1,XPL0TBIPL:	DW	IPL3,IPL7,IPL2,IPL6,IPL1,IPL5,IPL0,IPL4IPL:	MOV	C,A	MVI	B,4	LXI	H,TBIPLIPL10:	MOV	E,M	INX	H	MOV	D,M	INX	H	MOV	A,C	RRC	MOV	C,A	MVI	A,77H	JC	$+4	XRA	A	STAX	D	MOV	E,M	INX	H	MOV	D,M	INX	H	STAX	D	DCR	B	JNZ	IPL10	RET@PLOT:	PUSHA	MOV	E,A	MOV	A,B	STA	@XX	MOV	A,C	STA	@YY	DCR	E	JZ	PLOT10	DCR	E	JZ	PLOT90	MOV	L,C	MOV	A,B	CALL	@PLOTCPLOT90:	POPA	RETPLOT10:	MOV	L,C	MOV	A,B	CALL	@PLOTS	JMP	PLOT90@PLOTC:	MOV	E,L	MOV	H,A	RRC	RRC	RRC	ANI	1FH	ADI	80H	MOV	D,A	MOV	A,H	ANI	7	MOV	C,A	MVI	B,0	LXI	H,@TABM	DAD	B	MOV	A,M	CMA	MOV	L,A	XCHG@PLTC0:	LXI	B,2000H	MOV	A,M	ANA	EIPL4:	MOV	M,A	DAD	B	MOV	A,M	ANA	EIPL5:	MOV	M,A	DAD	B	MOV	A,M	ANA	EIPL6:	MOV	M,A	DAD	B	MOV	A,M	ANA	EIPL7:	MOV	M,A	RET@PLOTS:	MOV	E,L	MOV	H,A	RRC	RRC	RRC	ANI	1FH	ADI	80H	MOV	D,A	MOV	A,H	ANI	7	MOV	C,A	MVI	B,0	LXI	H,@TABM	DAD	B	MOV	L,M	XCHG@PLTS0:	LXI	B,2000H	MOV	A,E	ORA	MXPL0:	XRA	EIPL0:	MOV	M,A	DAD	B	MOV	A,E	ORA	MXPL1:	XRA	EIPL1:	MOV	M,A	DAD	B	MOV	A,E	ORA	MXPL2:	XRA	EIPL2:	MOV	M,A	DAD	B	MOV	A,E	ORA	MXPL3:	XRA	EIPL3:	MOV	M,A	RET@TABM:	DB	80H,40H,20H,10H,8,4,2,1@XY:@XX:	DB	0@YY:	DW	0