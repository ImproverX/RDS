	ASEG	ORG	2700H	;XTRN	@SCRMS,@STCOL,@PRNTC,@PRINT,@LINE,@PLOT	JMP	STARTSELJS	EQU	10HVIDEO	EQU	0E0FFHOLEVEL	EQU	7D00HDATA	EQU	4E00HGRMASC	EQU	7600HVIDDAT	EQU	DATALLEV	EQU	DATA+0A0HTLEVEL	EQU	DATA+160HGRAF	EQU	4200HSGRAF	EQU	6800HGRDES	EQU	GRAFGROHR	EQU	GRAF+400HGRELE	EQU	GRAF+880HGRVZR	EQU	GRAF+0A80HCOLORS:	DB 0,192,7,12,0A4H,34,54,-1	DB -1,192,7,12,0A4H,34,54,-1VINT0:	DW	0VINT7:	DW	0PLOT:	JMP	10EHLINE:	JMP	111HCOLOR:	JMP	114HPRINT:	JMP	10BHPRINTC:	JMP	108HSCR2:	JMP	117HSTR0:	DB	27,'Y80Уровень: ',0LDFILS:	LXI	H,FILGRF	LXI	D,GRAF	CALL	LOAD	LXI	H,FILDAT	LXI	D,DATA	JMP	LOADLOAD:	PUSH	D	LXI	D,5CH	MVI	B,12	CALL	COPY	CALL	CLEAR	LXI	D,5CH	MVI	C,15	CALL	5	POP	DLOAD10:	PUSH	D	MVI	C,1AH	CALL	5	LXI	D,5CH	MVI	C,20	CALL	5	POP	D	LXI	H,128	DAD	D	XCHG	ANA	A	JZ	LOAD10	RETCLEAR:	LXI	H,68H	LXI	B,18HCLEA10:	MOV	M,B	INX	H	DCR	C	JNZ	CLEA10	RETFILGRF:	DB	0,'GR      LAB'FILDAT:	DB	0,'LAB     DAT'DESVID	MACRO	MOV	A,H	ANA	A	RAR	PUSH	PSW	ADI	0E0H	MOV	H,A	POP	PSW	ENDMPCGET	MACRO	TAB1,TAB2	LXI	H,TAB1	DAD	D	MOV	C,M	INX	H	MOV	B,M	PUSH	B	LXI	H,TAB2	DAD	D	MOV	C,M	INX	H	MOV	B,M	POP	D	ENDMFORPUL	MACRO	MOV	A,H	ANA	A	RAR	LXI	B,0F00FH	JNC	$+6	LXI	B,0FF0H	ADI	080H	MOV	H,A	ENDMPICO	MACRO	COLUMN	REPT	COLUMN	LDAX	D	MOV	M,A	INR	H	INX	D	ENDM	ENDMPICOR0	MACRO	COLUMN	PUSH	H	PUSH	B	REPT	COLUMN	LDAX	B	ANA	M	XCHG	ORA	M	XCHG	MOV	M,A	INX	B	INX	D	INR	H	ENDM	POP	B	POP	H	ENDMPICG	MACRO	COLUMN	REPT	COLUMN	MOV	A,M	STAX	D	INR	H	INX	D	ENDM	ENDMPICOUT	MACRO	COLUMN	LOCAL	PIC10	MOV	B,HPIC10:	PICO	COLUMN	MVI	A,-20H	ADD	B	MOV	H,A	PICO	COLUMN	MVI	A,-40H	ADD	B	MOV	H,A	PICO	COLUMN	MOV	H,B	DCR	L	DCR	C	JNZ	PIC10	ENDMPICGET	MACRO	COL	LOCAL	PIC10	MOV	B,HPIC10:	PICG	COL	MVI	A,-20H	ADD	B	MOV	H,A	PICG	COL	MVI	A,-40H	ADD	B	MOV	H,A	PICG	COL	MOV	H,B	DCR	L	DCR	C	JNZ	PIC10	ENDMPICOR	MACRO	COL	LOCAL	PIC10	MVI	A,16PIC10:	PUSH	PSW	PUSH	H	PICOR0	COL	MVI	A,-20H	ADD	H	MOV	H,A	PICOR0	COL	MVI	A,-20H	ADD	H	MOV	H,A	PICOR0	COL	MVI	A,COL	ADD	C	MOV	C,A	MVI	A,0	ADC	B	MOV	B,A	POP	H	DCR	L	POP	PSW	DCR	A	JNZ	PIC10	ENDMPUSHX	MACRO	PUSH	H	PUSH	D	PUSH	B	ENDMPOPX	MACRO	POP	B	POP	D	POP	H	ENDMPUSHA	MACRO	PUSH	H	PUSH	D	PUSH	B	PUSH	PSW	ENDMPOPA	MACRO	POP	PSW	POP	B	POP	D	POP	H	ENDMCLRP1	MACRO	LOCAL	CLRP10	MOV	B,H	LXI	D,-2000HCLRP10:	MOV	M,E	DAD	D	MOV	M,E	DAD	D	MOV	M,E	MOV	H,B	DCR	L	DCR	C	JNZ	CLRP10	ENDMCLRP0	MACRO	COL	REPT	COL	MOV	M,E	INR	H	ENDM	ENDMCLRPIC	MACRO	COL	LOCAL	CLRP10	MOV	B,H	LXI	D,-2000HCLRP10:	CLRP0	COL	MOV	H,B	DAD	D	CLRP0	COL	MOV	H,B	DAD	D	DAD	D	CLRP0	COL	MOV	H,B	DCR	L	DCR	C	JNZ	CLRP10	ENDMCLRPO1	MACRO	LOCAL	CLRP10	MOV	B,H	LXI	D,-2000HCLRP10:	MOV	A,M	ANI	0F0H	MOV	M,A	DAD	D	MOV	A,M	ANI	0F0H	MOV	M,A	DAD	D	MOV	A,M	ANI	0F0H	MOV	M,A	MOV	H,B	DCR	L	DCR	C	JNZ	CLRP10	ENDMOINT0:	DW	0START:	DI	LXI	SP,8000H	;ALL	LDFILS	;ALL	DOSPSH	LHLD	1	SHLD	OINT0	XRA	A	OUT	10H	LDA	12H	STA	INVER	LXI	H,DYSPLY	SHLD	39H	LXI	H,EXIT	SHLD	1	MVI	A,0C3H	STA	38H	LDA	SELJS	ANA	A	MVI	A,81H	JZ	$+5	MVI	A,93H	OUT	4	MVI	A,1	STA	NLEVEL	CALL	SHIFT	CALL	MMASC	XRA	A	STA	SKPOP	LDA	11H	ANI	3	MVI	C,7	JZ	ST02	MVI	C,5	DCR	A	JZ	ST02	MVI	C,3ST02:	MOV	A,C	STA	OGRPOPST10:	LXI	SP,8000H	CALL	CLS	LXI	H,SZWET	MVI	M,16	XRA	A	CMP	M	JNZ	$-1	LXI	H,ETOHR1	LXI	D,OHDAT1	MVI	B,57	CALL	COPY	CALL	LEVEL	LXI	H,PODLO0	MVI	E,0	LXI	B,144*4	CALL	BFILL	CALL	MSGS	XRA	A	STA	FSHDES	STA	NACHBEGIN:	XRA	A	STA	TIMER	CALL	DES	CALL	DFIR20	CALL	OHR	XRA	A	STA	FDPOP	CALL	TDRAW	CALL	VLOB	XRA	A	STA	DFRNOW	DCR	A	STA	NACH	LXI	H,TIMER	MVI	A,3	CMP	M	JNC	$-1	LHLD	POLDES	MOV	A,L	CPI	32	JC	NEXTLV	JMP	BEGINMSGS:	MVI	A,7	CALL	SCR2	LDA	SKPOP	MOV	C,A	LDA	OGRPOP	SUB	C	MOV	E,A	LXI	B,1000H	LXI	H,2005HMSGS10:	MVI	A,2	CALL	PLOT	MVI	A,2	CALL	COLOR	PUSH	B	MOV	B,H	MOV	C,L	MVI	A,2	CALL	LINE	POP	B	MVI	A,6	CALL	COLOR	MVI	A,2	CALL	PLOT	PUSH	B	MOV	B,H	MOV	C,L	MVI	A,1	CALL	LINE	MVI	A,10H	ADD	H	MOV	H,A	POP	B	MVI	A,10H	ADD	B	MOV	B,A	DCR	E	JNZ	MSGS10	MVI	A,7H	CALL	COLOR	LXI	H,STR0	CALL	PRINT	LDA	NLEVEL	CALL	DECOUT	RETDECOUT:	MOV	L,A	MVI	H,0	LXI	D,-10	MVI	B,0	PUSH	HDECO10:	DAD	D	JNC	DECO12	INR	B	XTHL	POP	H	PUSH	H	JMP	DECO10DECO12:	MOV	A,B	ADI	30H	MOV	C,A	CALL	PRINTC	POP	H	MOV	A,L	ADI	30H	MOV	C,A	JMP	PRINTCNEXTLV:	LXI	H,NLEVEL	INR	M	MOV	A,M	CPI	21	JC	ST10	MVI	A,17H	CALL	COLOR	CALL	CLS	LXI	H,STRKN	CALL	PRINTNEXT10:	LDA	KEYS	INR	A	JZ	NEXT10	JMP	EXITVLOB:	LDA	FLOHR1	ANA	A	JZ	VLOB02	LHLD	PLOHR1	SHLD	VXY1	LHLD	SHGOH1	SHLD	VS1	LDA	FLOHR2	ANA	A	JZ	VLOB04	LHLD	PLOHR2	SHLD	VXY2	LHLD	SHGOH2	SHLD	VS2	CALL	VLOB10	LHLD	VS2	SHLD	SHGOH2	LHLD	VS1	SHLD	SHGOH1VLOB04:	LDA	FLOHR3	ANA	A	JZ	VLOB02	LHLD	PLOHR3	SHLD	VXY2	LHLD	SHGOH3	SHLD	VS2	CALL	VLOB10	LHLD	VS2	SHLD	SHGOH3	LHLD	VS1	SHLD	SHGOH1VLOB02:	LDA	FLOHR2	ANA	A	RZ	LDA	FLOHR3	ANA	A	RZ	LHLD	PLOHR2	SHLD	VXY1	LHLD	SHGOH2	SHLD	VS1	LHLD	PLOHR3	SHLD	VXY2	LHLD	SHGOH3	SHLD	VS2	CALL	VLOB10	LHLD	VS2	SHLD	SHGOH3	LHLD	VS1	SHLD	SHGOH2	RETVLOB10:	LDA	VXX1	MOV	B,A	LDA	VXX2	MOV	C,A	SUB	B	JP	$+5	CMA	INR	A	CPI	5	RNC	LDA	VYY1	MOV	D,A	LDA	VYY2	SUB	D	JP	$+5	CMA	INR	A	CPI	25	RNC	LHLD	VS1	XCHG	LHLD	VS2	CALL	HDCMP	JZ	VLOB30	MOV	A,H	ADD	D	MOV	H,A	MOV	A,L	ADD	E	ORA	H	JZ	VLOB30	MOV	A,D	ANA	A	JNZ	VLOB20	LDA	VYY1	MOV	H,A	LDA	VYY2	CMP	H	LXI	H,5	JP	$+7	MVI	H,0	MVI	L,-5	MOV	A,C	CMP	B	SHLD	VS1	LXI	H,100H	JP	$+6	LXI	H,0FF00H	SHLD	VS2	RETVLOB20:	LDA	VYY1	MOV	H,A	LDA	VYY2	CMP	H	LXI	H,5	JM	$+7	MVI	H,0	MVI	L,-5	SHLD	VS2	MOV	A,C	CMP	B	LXI	H,100H	JM	$+6	LXI	H,0FF00H	SHLD	VS1	RETVLOB30:	LHLD	VS1	MOV	A,H	ANA	A	JNZ	VLOB40	LXI	H,5	MOV	D,H	MVI	E,-5	LDA	VYY1	MOV	B,A	LDA	VYY2	CMP	B	JM	$+4	XCHG	SHLD	VS1	XCHG	SHLD	VS2	RETVLOB40:	MOV	A,C	CMP	B	LXI	H,100H	LXI	D,0FF00H	JP	$+4	XCHG	SHLD	VS2	XCHG	SHLD	VS1	RETOHR:	CALL	OHR10	LXI	H,OHDAT1	LXI	D,OHDATS	MVI	B,19	PUSHX	CALL	COPY	LXI	D,OHDAT1	LXI	H,OHDAT2	MVI	B,19	PUSHX	CALL	COPY	CALL	OHR10	POPX	XCHG	CALL	COPY	LXI	D,OHDAT1	LXI	H,OHDAT3	MVI	B,19	PUSHX	CALL	COPY	CALL	OHR10	POPX	XCHG	CALL	COPY	POPX	XCHG	CALL	COPY	RETOHR10:	CALL	TSTOHR	XRA	A	STA	PCOHR1	CALL	OFIRE	CALL	OHSTLK	LXI	H,0	SHLD	POPOHR	LDA	FLOHR1	ANA	A	RZ	LXI	H,ZDOHR1	MOV	A,M	DCR	M	ANA	A	RNZ	INR	M	CALL	OHINST	CALL	TSOHR2	CALL	CHOHR	RETCHOHR:	LDA	FLOHR1	ANA	A	RZ	LHLD	SHGOH1	MOV	A,H	ORA	L	RZ	XCHG	LHLD	PLOHR1	MOV	A,D	ADD	H	MOV	H,A	MOV	A,E	ADD	L	MOV	L,A	SHLD	PLOHR1	LDA	PCOHR1	CPI	3	RZ	CPI	7	RZ	LDA	PADOH1	ANA	A	JZ	CHOH00	MVI	A,8	STA	PCOHR1	RETCHOH00:	LHLD	SHGOH1	MOV	A,L	ANA	A	JNZ	CHOH10	DCR	H	JNZ	CHOH02	LXI	H,FSHOH1	INR	M	MOV	A,M	CPI	4	JC	$+5	XRA	A	MOV	M,A	ADI	4	CPI	7	JC	$+5	DCR	A	DCR	A	STA	PCOHR1	RETCHOH02:	LXI	H,FSHOH1	DCR	M	MOV	A,M	JP	$+6	MVI	A,3	MOV	M,A	CPI	3	JC	$+5	DCR	A	DCR	A	STA	PCOHR1	RETCHOH10:	LXI	H,FSVOH1	MOV	A,M	INR	A	ANI	1	MOV	M,A	ADI	8	STA	PCOHR1	RETMINVZR:	MOV	A,L	SUI	15	MOV	L,A	MOV	A,H	PUSH	H	ANI	03CH	MOV	H,A	PUSH	H	CALL	MINDEL	POP	H	XTHL	MOV	A,L	ADI	24	MOV	L,A	MOV	A,H	DCR	A	ANA	A	RAR	PUSH	PSW	ADI	0E0H	MOV	H,A	POP	PSW	LXI	D,MINBUF	MVI	C,24	PUSHX	PUSH	H	JNC	MINV10	PICGET	4	POP	H	LXI	D,VZRVS	MVI	C,24	PICOUT	4	LXI	H,ZVMIN	MVI	B,4	CALL	GENER	POPX	PICOUT	4MINV12:	POP	H	MOV	A,H	RRC	ADI	0E0H	MOV	H,A	LXI	D,PUSTO	MVI	C,10	PICOUT	2	RETMINV10:	PICGET	3	POP	H	LXI	D,VZRV	MVI	C,24	PICOUT	3	LXI	H,ZVMIN	MVI	B,4	CALL	GENER	POPX	PICOUT	3	JMP	MINV12TSOHMN:	PUSH	H	LHLD	PDLOH1	XCHG	LHLD	SPLOH1	CALL	DRWDES	POP	H	CALL	MINVZR	XRA	A	STA	FLOHR1	RETVZRDES:	PUSH	H	LHLD	SPLDES	LXI	D,PODLO0	CALL	DRWDES	POP	H	CALL	MINVZR	MVI	A,25	EI	HLT	DCR	A	JNZ	$-2UBIDES:	CALL	CLS	LXI	H,LLEV	CALL	LEVL11	CALL	MELUBIUBID10:	LDA	KEYS	INR	A	JZ	UBID10	JMP	EXITMELUBI:	LXI	H,UBICHSMELU10:	MOV	E,M	INX	H	MOV	D,M	INX	H	MOV	A,D	ORA	E	CPI	1	JZ	MELU12	CALL	MELU20	JMP	MELU10MELU12:	MVI	A,36H	OUT	8	RETMELU20:	MVI	A,36H	OUT	8	MOV	A,D	ORA	E	JZ	MELU22	MOV	A,E	OUT	11	MOV	A,D	OUT	11MELU22:	MVI	A,10	EI	HLT	DCR	A	JNZ	$-2	RETUBICHS:	DW 1AA2H,2CCAH,1AA2H,2CCAH,0,17BAH,27E7H,17BAH	DW 27E7H,0,0,1AA2H,2CCAH,17BAH,27E7H,2CCAH,238DH	DW 218EH,218EH,1TSOHR2:	LDA	FLOHR1	ANA	A	RZ	LHLD	PLOHR1	MVI	D,0	MVI	E,-16	LXI	B,TSTLIN	CALL	WHO	LDAX	B	CPI	7	JNZ	TSOH10	INX	B	INX	B	INX	B	LDAX	B	CPI	7	JNZ	TSOH10TSOH02:	MVI	H,0	MVI	L,-5	SHLD	SHGOH1	MVI	A,-1	STA	PADOH1	RETTSOH10:	LXI	B,TSTLVD	CALL	WHOVID	LDAX	B	ANA	A	JNZ	TSOH12	INX	B	INX	B	INX	B	LDAX	B	ANA	A	JZ	TSOH02TSOH12:	LXI	B,TSTLIN	LDAX	B	CPI	4	JZ	TSOHMN	CPI	6	JNZ	TSOH14	LDA	PADOH1	ANA	A	JNZ	TSOH02TSOH14:	LXI	H,PADOH1	MOV	A,M	ANA	A	MVI	M,0	JZ	VIBOR	LXI	H,0FF00H	SHLD	SHGOH1VIBOR:	LHLD	POLDES	MOV	B,H	MOV	C,L	LHLD	SHGOH1	XCHG	LHLD	PLOHR1	MOV	A,D	ANA	A	JZ	VIBO10	MOV	A,L	CMP	C	JZ	VIBO24	JNC	VIBO22	INR	L	CALL	WHOV10	DCR	L	CPI	20H	JNZ	VIBO24	LXI	H,5	SHLD	SHGOH1	RETVIBO22:	MOV	A,L	SUI	16	PUSH	H	MOV	L,A	CALL	WHOV10	POP	H	CPI	20H	JNZ	VIBO24	MVI	H,0	MVI	L,-5	SHLD	SHGOH1	RETVIBO24:	MOV	A,D	ANA	A	JP	VIBO25	DCR	H	JMP	VIBO26VIBO25:	MOV	A,H	ADI	4	MOV	H,AVIBO26:	MOV	A,L	SUI	12	MOV	L,A	CALL	WHO10	CPI	5	RNC	MOV	A,D	CMA	INR	A	MOV	D,A	XCHG	SHLD	SHGOH1	RETVIBO10:	MOV	A,H	CMP	B	PUSH	H	JZ	VIBO14	JC	VIBO12	MOV	A,L	SUI	12	MOV	L,A	MOV	A,H	SUI	4	MOV	H,A	CALL	WHO10	CPI	5	JC	VIBO14	MOV	A,L	SUI	4	MOV	L,A	CALL	WHO10	CPI	7	JZ	VIBO14	POP	H	LXI	H,0FF00H	SHLD	SHGOH1	RETVIBO12:	MOV	A,L	SUI	12	MOV	L,A	MOV	A,H	ADI	5	MOV	H,A	CALL	WHO10	CPI	5	JC	VIBO14	MOV	A,L	SUI	4	MOV	L,A	CALL	WHO10	CPI	7	JZ	VIBO14	POP	H	LXI	H,100H	SHLD	SHGOH1	RETVIBO14:	MOV	A,E	ANA	A	MVI	A,-16	JM	$+5	MVI	A,1	POP	H	ADD	L	MOV	L,A	CALL	WHO10	CPI	5	RZ	MOV	A,E	CMA	INR	A	MOV	E,A	XCHG	SHLD	SHGOH1	RETOHINST:	LDA	FLOHR1	ANA	A	RZ	LHLD	VDSOH1	MOV	A,H	ORA	L	RNZ	LHLD	PLOHR1	XCHG	LHLD	POLDES	MOV	A,E	ADI	3	CMP	L	RC	SUI	6	CMP	L	JZ	$+4	RNC	MOV	A,D	CMP	H	JNC	OHIN10	LXI	H,100H	MOV	A,D	ADI	4	MOV	D,A	MVI	B,7	JMP	OHIN12OHIN10:	LXI	H,0FF00H	DCR	D	MVI	B,3OHIN12:	XCHG	PUSH	H	LHLD	SHGOH1	CALL	HDCMP	POP	H	XCHG	RNZ	SHLD	SMSOH1	XCHG	MOV	A,L	SUI	4	MOV	L,A	SHLD	VDSOH1	MOV	A,B	STA	PCOHR1	LXI	H,DSTZV	MVI	B,8	CALL	GENER	RETOHSTLK:	LHLD	POPOHR	MOV	A,H	ORA	L	JZ	OHST20	XCHG	LHLD	POLDES	MOV	A,L	CMP	E	JC	OHST20	SUI	14	CMP	E	JZ	$+6	JNC	OHST20	MOV	A,H	CMP	D	JZ	$+6	JNC	OHST20	ADI	4	CMP	D	JC	OHST20	XCHG	FORPUL	MOV	A,M	ANA	C	MOV	M,A	LXI	H,0	SHLD	SMSOH1	SHLD	VDSOH1	CALL	INDESOHST20:	LDA	FLOHR1	ANA	A	RZ	LHLD	PLOHR1	XCHG	LHLD	POLDES	MOV	A,L	ADI	15	CMP	E	RC	SUI	31	CMP	E	RNC	MOV	A,H	SUI	4	CMP	D	JZ	$+4	RNC	ADI	8	CMP	D	RC	CALL	INOHR	CALL	INDES	RETINDES:	LHLD	SPLDES	LXI	D,PODLO0	PUSH	D	PUSH	H	CALL	DRWDES	POP	H	PUSH	H	CALL	DRWSTL	LXI	H,ZVINDS	MVI	B,4	CALL	GENER	POP	H	POP	D	PUSH	H	CALL	DRWDES	LDA	PICDES	POP	H	CALL	DRDES	LXI	H,SKPOP	INR	M	LDA	OGRPOP	SUB	M	PUSH	PSW	LXI	B,1100H	LXI	H,2005H	MOV	E,A	INR	EINDS10:	DCR	E	JZ	INDS12	MVI	A,10H	ADD	H	MOV	H,A	MVI	A,10H	ADD	B	MOV	B,A	JMP	INDS10INDS12:	XRA	A	CALL	COLOR	MVI	A,2	CALL	PLOT	MOV	B,H	MOV	C,L	CALL	LINE	POP	PSW	JZ	UBIDES	RETOFIRE:	MVI	A,2OFIR10:	PUSH	PSW	CALL	OFIR12	POP	PSW	DCR	A	JNZ	OFIR10	RETOFIR12:	LHLD	SMSOH1	XCHG	LHLD	VDSOH1	MOV	A,H	ORA	L	RZ	PUSH	H	FORPUL	MOV	A,M	ANA	C	MOV	M,A	POP	H	DAD	D	CALL	WHO10	CPI	5	JC	OFIR14	CALL	WHOV10	ANA	A	JZ	OFIR13	CPI	20H	JZ	OFIR13	CPI	4	JNZ	OFIR14OFIR13:	SHLD	VDSOH1	FORPUL	MOV	A,B	ORA	M	MOV	M,A	RETOFIR14:	SHLD	POPOHR	LXI	H,0	SHLD	SMSOH1	SHLD	VDSOH1	LXI	H,ZVPOP	MVI	B,4	CALL	GENER	RETTSTOHR:	LDA	FLOHR1	ANA	A	RZ	LHLD	PLOHR1	MOV	A,L	CPI	32	JC	TSTO90	LDA	FDPOP	ANA	A	RZ	XCHG	LHLD	DPOPVD	MOV	A,E	CMP	L	RC	SUI	14	CMP	L	JZ	$+4	RNC	MOV	A,D	CMP	H	JZ	$+4	RNC	ADI	4	CMP	H	RCINOHR:	LHLD	PDLOH1	XCHG	LHLD	PLOHR1	PUSH	H	CALL	DRWDES	POP	H	CALL	DRWSTL	LXI	H,ZVUB	MVI	B,4	CALL	GENER	XRA	A	STA	FDPOPTSTO90:	LHLD	PDLOH1	XCHG	LHLD	PLOHR1	CALL	DRWDES	XRA	A	STA	FLOHR1	RETDRWSTL:	DESVID	LXI	D,STLK	LXI	B,MSTLK	JNC	DRWST0	LXI	D,STLKS	LXI	B,MSTLKS	PICOR	3	RETDRWST0:	PICOR	2	RETDES:	CALL	TSTDES	LDA	DFRNOW	ANA	A	RNZ	CALL	CHDES	RETTDRAW:	CALL	TDDS0	CALL	TDOH0	CALL	TDDS1	CALL	TDOH1	CALL	TDDS2	JMP	TDOH2TDDS0:	CALL	TFLD	RC	LHLD	SPLDES	LXI	D,PODLO0	JMP	DRWDESTDDS1:	CALL	TFLD	RC	LHLD	POLDES	LXI	D,PODLO0	JMP	SAVDESTDDS2:	CALL	TFLD	RC	LHLD	POLDES	SHLD	SPLDES	LDA	PICDES	JMP	DRDESTDOH2:	CALL	TFO1	JC	TDOH22	LHLD	PLOHR1	SHLD	SPLOH1	LDA	PCOHR1	CALL	DROHRTDOH22:	CALL	TFO2	JC	TDOH24	LHLD	PLOHR2	SHLD	SPLOH2	LDA	PCOHR2	CALL	DROHRTDOH24:	CALL	TFO3	RC	LHLD	PLOHR3	SHLD	SPLOH3	LDA	PCOHR3	JMP	DROHRTDOH1:	CALL	TFO1	JC	TDOH12	LXI	D,PODLO1	LHLD	PLOHR1	CALL	SAVDESTDOH12:	CALL	TFO2	JC	TDOH14	LXI	D,PODLO2	LHLD	PLOHR2	CALL	SAVDESTDOH14:	CALL	TFO3	RC	LXI	D,PODLO3	LHLD	PLOHR3	JMP	SAVDESTDOH0:	CALL	TFO1	JC	TDOH02	LXI	D,PODLO1	LHLD	SPLOH1	CALL	DRWDESTDOH02:	CALL	TFO2	JC	TDOH04	LXI	D,PODLO2	LHLD	SPLOH2	CALL	DRWDESTDOH04:	CALL	TFO3	RC	LXI	D,PODLO3	LHLD	SPLOH3	JMP	DRWDESTFO1:	LDA	FLOHR1	ANA	A	STC	RZ	LDA	ZDOHR1	ANA	A	STC	RNZ	CMC	RETTFO2:	LDA	FLOHR2	ANA	A	STC	RZ	LDA	ZDOHR2	ANA	A	STC	RNZ	CMC	RETTFO3:	LDA	FLOHR3	ANA	A	STC	RZ	LDA	ZDOHR3	ANA	A	STC	RNZ	CMC	RETTFLD:	LDA	NACH	ANA	A	RZ	LDA	DFRNOW	ANA	A	RNZ	LHLD	SHGDES	MOV	A,H	ORA	L	STC	RZ	CMC	RETRISOHR:	LDA	FLOHR1	ANA	A	RZ	LHLD	PDLOH1	XCHG	LHLD	SPLOH1	PUSH	D	CALL	DRWDES	LHLD	PLOHR1	POP	D	PUSH	H	CALL	SAVDES	LDA	PCOHR1	POP	H	CALL	DROHR	LHLD	PLOHR1	SHLD	SPLOH1	RETTSTDES:	LXI	H,0	SHLD	SHGDES	LHLD	POLDES	LXI	B,TSTLIN	MVI	D,0	MVI	E,-16	CALL	WHO	LDAX	B	CPI	7	JNZ	TSTD10	INX	B	LDAX	B	CPI	7	JNZ	TSTD10	INX	B	LDAX	B	CPI	7	JNZ	TSTD10	INX	B	LDAX	B	CPI	7	JNZ	TSTD10TSTD02:	MVI	H,0	MVI	L,-5	SHLD	SHGDES	MVI	A,-1	STA	PADDES	RETTSTD10:	LXI	B,TSTLVD	CALL	WHOVID	LDAX	B	ANA	A	JNZ	TSTD11	INX	B	LDAX	B	ANA	A	JNZ	TSTD11	INX	B	LDAX	B	ANA	A	JNZ	TSTD11	INX	B	LDAX	B	ANA	A	JZ	TSTD02TSTD11:	LXI	B,TSTLIN	LDAX	B	CPI	4	JZ	VZRDES	INX	B	INX	B	INX	B	LDAX	B	INR	H	INR	H	INR	H	CPI	4	JZ	VZRDES	DCR	H	DCR	H	DCR	H	DCX	B	DCX	B	DCX	B	LDAX	B	CPI	6	JNZ	TSTD12	LDA	PADDES	ANA	A	JNZ	TSTD02TSTD12:	XRA	A	STA	PADDES	LDA	KEYS	RLC	JNC	TSTDDW	RLC	JNC	TSTDRG	RLC	JNC	TSTDUP	RLC	JNC	TSTDLF	RLC	RLC	RLC	JNC	DFIRRG	RLC	JNC	DFIRLF	RETDFIRRG:	LXI	D,100H	LHLD	POLDES	MOV	A,L	SUI	4	MOV	L,A	MOV	A,H	ADI	4	MOV	H,A	MVI	A,7	JMP	DFIR10DFIRLF:	LXI	D,0FF00H	LHLD	POLDES	DCR	H	MOV	A,L	SUI	4	MOV	L,A	MVI	A,3DFIR10:	PUSH	PSW	PUSH	H	PUSH	D	LXI	H,DESBFR	MVI	B,4	LXI	D,5	XRA	ADFIR12:	CMP	M	JZ	DFIR14	DAD	D	DCR	B	JNZ	DFIR12	POP	D	POP	H	POP	PSW	RETDFIR14:	POP	D	INR	M	INX	H	MOV	M,E	INX	H	MOV	M,D	INX	H	POP	D	MOV	M,E	INX	H	MOV	M,D	MVI	A,-1	STA	DFRNOW	POP	PSW	STA	PICDES	LXI	H,DSTZV	MVI	B,4	CALL	GENER	RETDFIR20:	MVI	A,3DFIR21:	PUSH	PSW	CALL	DFIR22	POP	PSW	DCR	A	JNZ	DFIR21	RETDFIR22:	LXI	H,DESBFR	MVI	B,4	LXI	D,5	XRA	ADFIR23:	CMP	M	CNZ	DFIR24	DAD	D	DCR	B	JNZ	DFIR23	RETDFIR24:	PUSHA	INX	H	MOV	C,M	INX	H	MOV	B,M	INX	H	MOV	E,M	INX	H	MOV	D,M	XCHG	PUSH	H	PUSH	B	FORPUL	MOV	A,M	ANA	C	MOV	M,A	POP	B	POP	H	DAD	B	CALL	WHO10	CPI	5	JC	DFIR30	CALL	WHOV10	ANA	A	JZ	DFIR25	CPI	20H	JZ	DFIR25	CPI	4	JNZ	DFIR30DFIR25:	XCHG	MOV	M,D	DCX	H	MOV	M,E	XCHG	FORPUL	MOV	A,B	ORA	M	MOV	M,A	POPA	RETDFIR30:	SHLD	DPOPVD	XCHG	DCX	H	DCX	H	DCX	H	DCX	H	MVI	M,0	LXI	H,ZVPOP	MVI	B,4	CALL	GENER	LXI	H,FDPOP	INR	M	POPA	RETTSTD20:	SHLD	SHGDES	RETTSTDDW:	LDAX	B	MVI	H,0	MVI	L,-5	LXI	D,4TSDW10:	CPI	5	JNZ	$+4	INR	D	DCR	E	INX	B	LDAX	B	JNZ	TSDW10	MOV	A,D	CPI	3	JNC	TSTD20	RETTSTDUP:	LHLD	POLDES	LXI	B,TSTLIN	INR	L	LXI	D,0	CALL	WHO	LXI	H,5	LXI	D,4TSUP10:	LDAX	B	INX	B	CPI	5	JNZ	$+4	INR	D	DCR	E	JNZ	TSUP10	MOV	A,D	CPI	3	JNC	TSTD20	RETTSTDRG:	LHLD	POLDES	MVI	D,4	MVI	E,-1	LXI	B,TSTLIN	CALL	WHO	LDAX	B	CPI	5	RC	MVI	E,-13	CALL	WHO	LDAX	B	CPI	5	RC	LXI	H,100H	SHLD	SHGDES	RETTSTDLF:	LHLD	POLDES	MVI	D,-1	MVI	E,-1	LXI	B,TSTLIN	CALL	WHO	LDAX	B	CPI	5	RC	MVI	E,-13	CALL	WHO	LDAX	B	CPI	5	RC	LXI	H,0FF00H	SHLD	SHGDES	RETTSTLIN:	DS	4TSTLVD:	DS	4WHO:	PUSH	H	PUSH	B	MOV	A,H	ADD	D	MOV	H,A	MOV	A,L	ADD	E	MOV	L,A	CALL	WHO10	STAX	B	INX	B	INR	H	CALL	WHO10	STAX	B	INX	B	INR	H	CALL	WHO10	STAX	B	INX	B	INR	H	CALL	WHO10	STAX	B	POP	B	POP	H	RETWHOVID:	PUSH	H	PUSH	B	MOV	A,H	ADD	D	MOV	H,A	MOV	A,L	ADD	E	MOV	L,A	CALL	WHOV10	STAX	B	INX	B	INR	H	CALL	WHOV10	STAX	B	INX	B	INR	H	CALL	WHOV10	STAX	B	INX	B	INR	H	CALL	WHOV10	STAX	B	POP	B	POP	H	RETWHOV10:	PUSH	H	PUSH	D	PUSH	B	MOV	A,H	ANI	3FH	RAR	PUSH	PSW	ADI	0E0H	MOV	H,A	LXI	D,-2000H	POP	PSW	MVI	B,0F0H	JNC	$+5	MVI	B,0FH	MOV	A,M	ANA	B	MOV	C,A	DAD	D	MOV	A,M	ANA	B	ORA	C	MOV	C,A	DAD	D	MOV	A,M	ANA	B	ORA	C	POP	B	POP	D	POP	H	RETWHO10:	PUSH	H	PUSH	B	CALL	WHO11	MOV	A,M	POP	B	POP	H	RETMINDEL:	PUSH	H	PUSH	B	CALL	WHO11	MVI	M,7	POP	B	POP	H	RETWHO11:	MOV	A,H	ANI	03CH	RRC	RRC	PUSH	PSW	MOV	A,L	CMA	LXI	H,OLEVEL	LXI	B,16WHO12:	CPI	10	JC	WHO14	DAD	B	SUI	10	JMP	WHO12WHO14:	POP	PSW	ADD	L	MOV	L,A	MOV	A,H	ACI	0	MOV	H,A	RETDRWDES:	DESVID	MVI	C,16	JC	DRWDS0	PICOUT	2	RETDRWDS0:	PICOUT	3	RETDRDES:	ADD	A	MOV	E,A	MVI	D,0	DESVID	PUSH	H	JC	DRDES0	PCGET	PCDES,MSDES	POP	H	PICOR	2	RETDRDES0:	PCGET	PCDESS,MSDESS	POP	H	PICOR	3	RETDROHR:	ADD	A	MOV	E,A	MVI	D,0	DESVID	PUSH	H	JC	DROHR0	PCGET	PCOHR,MSOHR	POP	H	PICOR	2	RETDROHR0:	PCGET	PCOHRS,MSOHRS	POP	H	PICOR	3	RETSAVDES:	DESVID	MVI	C,16	JC	SVDES0	PICGET	2	RETSVDES0:	PICGET	3	RETCHDES:	LHLD	SHGDES	XCHG	LHLD	POLDES	MOV	A,D	ORA	E	RZ	MOV	A,H	ADD	D	MOV	H,A	MOV	A,L	ADD	E	MOV	L,A	SHLD	POLDES	MOV	A,D	CPI	1	JZ	CHDRIG	CPI	-1	JZ	CHDLEF	LDA	PADDES	ANA	A	JZ	CHDS10	MVI	A,8	STA	PICDES	RETCHDS10:	LXI	H,FSVDES	MOV	A,M	INR	A	ANI	1	MOV	M,A	MVI	A,8	JZ	CHDS12	INR	ACHDS12:	STA	PICDES	RETCHDRIG:	LXI	H,FSHDES	INR	M	MOV	A,M	CPI	4	JC	$+5	XRA	A	MOV	M,A	ADI	4	CPI	7	JC	$+5	DCR	A	DCR	A	STA	PICDES	RETCHDLEF:	LXI	H,FSHDES	DCR	M	MOV	A,M	JP	$+6	MVI	A,3	MOV	M,A	CPI	3	JC	$+5	DCR	A	DCR	A	STA	PICDES	RETLEVEL:	LXI	H,TLEVEL-0C0H	LXI	D,0C0H	LDA	NLEVELLEVL10:	DAD	D	DCR	A	JNZ	LEVL10LEVL11:	LXI	D,OLEVEL	MOV	B,H	MOV	C,L	LXI	H,VIDEO	MVI	A,24LEVL12:	PUSH	PSW	PUSH	H	MVI	A,16LEVL14:	PUSH	PSW	RRC	LDAX	B	JNC	LEVL15	INX	B	RRC	RRC	RRC	RRCLEVL15:	ANI	15	CPI	8	JC	$+5	MVI	A,7	STAX	D	INX	D	CPI	7	JZ	LEVL20	PUSH	D	PUSH	B	PUSH	H	MOV	L,A	MVI	H,0	DAD	H	DAD	H	MOV	E,L	MOV	D,H	DAD	H	DAD	H	DAD	D	MOV	E,L	MOV	D,H	DAD	H	DAD	D	LXI	D,GRELE	DAD	D	XCHG	POP	H	PUSH	H	MVI	C,0AH	PICOUT	2	POP	H	POP	B	POP	DLEVL20:	INR	H	INR	H	POP	PSW	DCR	A	JNZ	LEVL14	POP	H	MOV	A,L	SUI	10	MOV	L,A	POP	PSW	DCR	A	JNZ	LEVL12	LXI	H,VIDDAT	LDA	NLEVEL	DCR	A	ADD	A	ADD	A	ADD	A	ADD	L	MOV	L,A	MOV	A,H	ACI	0	MOV	H,A	MOV	E,M	INX	H	MOV	D,M	INX	H	PUSH	D	MOV	E,M	INX	H	MOV	D,M	INX	H	PUSH	D	MOV	E,M	INX	H	MOV	D,M	INX	H	PUSH	D	MOV	E,M	INX	H	MOV	D,M	XCHG	SHLD	PLOHR1	SHLD	SPLOH1	MOV	A,H	ORA	L	STA	FLOHR1	POP	H	SHLD	PLOHR2	SHLD	SPLOH2	MOV	A,H	ORA	L	STA	FLOHR2	POP	H	SHLD	PLOHR3	SHLD	SPLOH3	MOV	A,H	ORA	L	STA	FLOHR3	POP	H	SHLD	POLDES	SHLD	SPLDES	RETGENER:	MOV	E,M	INX	H	MOV	D,M	INX	H	MOV	A,D	ORA	E	RZ	PUSH	B	MVI	C,1GENR10:	PUSH	D	DCX	D	MOV	A,D	ORA	E	JNZ	$-3	POP	D	PUSH	DGENR12:	MOV	A,C	OUT	0	DCX	D	MOV	A,D	ORA	E	JNZ	GENR12	OUT	0	DCR	B	POP	D	JNZ	GENR10	POP	B	JMP	GENERCOPY:	MOV	A,M	STAX	D	INX	H	INX	D	DCR	B	JNZ	COPY	RETBFILL:	MOV	M,E	INX	H	DCX	B	MOV	A,B	ORA	C	JNZ	BFILL	RETDOSPSH:	DI	XRA	A	STA	3CH	MVI	A,81H	STA	3EH	LDA	4	STA	SDISK	MVI	C,0	CALL	5	RETDOSPOP:	DI	MVI	A,80H	STA	3EH	MVI	A,23H	STA	3CH	MVI	C,0	CALL	5	LDA	SDISK	STA	4	RETSDISK:	DB	0MMASC:	LXI	H,GRMASC	LXI	B,700H	MVI	E,0	CALL	BFILL	LXI	D,GRDES	LXI	H,GRMASC	MVI	B,10	MVI	C,2MMAS10:	CALL	MMAS20	DCR	B	JNZ	MMAS10	LXI	D,GROHR	MVI	B,11MMAS11:	CALL	MMAS20	DCR	B	JNZ	MMAS11	LXI	D,SGRAF	MVI	B,21	INR	CMMAS12:	CALL	MMAS20	DCR	B	JNZ	MMAS12	RETMMAS20:	PUSH	B	MVI	B,16MMAS21:	MVI	A,3MMAS22:	PUSH	PSW	PUSH	H	PUSH	BMMAS23:	LDAX	D	ORA	M	MOV	M,A	INX	D	INX	H	DCR	C	JNZ	MMAS23	POP	B	POP	H	POP	PSW	DCR	A	JNZ	MMAS22	PUSH	BMMAS25:	MOV	A,M	CMA	MOV	M,A	INX	H	DCR	C	JNZ	MMAS25	POP	B	DCR	B	JNZ	MMAS21	POP	B	RETSHIFT:	LXI	H,GRAF	LXI	B,SGRAF	MVI	A,16	STA	SHFT20+1	MVI	A,2	STA	SHFT24-1	MVI	A,21SHFT10:	PUSH	PSW	CALL	SHFT20	POP	PSW	CPI	12	JNZ	$+6	LXI	H,GROHR	DCR	A	JNZ	SHFT10	LXI	H,GRVZR	MVI	A,24	STA	SHFT20+1	MVI	A,3	STA	SHFT24-1	CALL	SHFT20	RETSHFT20:	MVI	D,16SHFT22:	PUSH	D	MVI	A,3SHFT23:	PUSH	PSW	MVI	E,0	MVI	D,2SHFT24:	MOV	A,M	INX	H	RRC	RRC	RRC	RRC	PUSH	PSW	ANI	15	ORA	E	STAX	B	INX	B	POP	PSW	ANI	0F0H	MOV	E,A	DCR	D	JNZ	SHFT24	STAX	B	INX	B	POP	PSW	DCR	A	JNZ	SHFT23	POP	D	DCR	D	JNZ	SHFT22	RETEXIT:	DI	LXI	SP,8000H	;ALL	DOSPOP	LHLD	OINT0	SHLD	1	JMP	0RDEB:	IN	1	RLC	RCDEBUG:	DI	SHLD	10H	XCHG	SHLD	12H	MOV	H,B	MOV	L,C	SHLD	14H	POP	H	SHLD	20H	PUSH	PSW	POP	H	SHLD	16H	POP	H	SHLD	22H	JMP	EXITHDCMP:	MOV	A,H	SUB	D	RNZ	MOV	A,L	SUB	E	RETCLS:	DI	LXI	H,0	DAD	SP	LXI	D,0	LXI	B,800H	LXI	SP,0CLS10:	PUSH	D	PUSH	D	PUSH	D	PUSH	D	PUSH	D	PUSH	D	PUSH	D	PUSH	D	DCX	B	MOV	A,B	ORA	C	JNZ	CLS10	SPHL	EI	RETDYSPLY:	PUSH	H	PUSH	D	PUSH	B	PUSH	PSW	LXI	H,SZWET	MOV	A,M	ANA	A	JZ	DYSP20	DCR	M	LXI	H,COLORS+15	MVI	B,15DYSP10:	MOV	A,B	OUT	2	MOV	A,MINVER:	NOP	OUT	12	DCX	H	OUT	12	INR	C	OUT	12	DCR	C	OUT	12	INR	C	OUT	12	DCR	C	OUT	12	DCR	B	OUT	12	JP	DYSP10DYSP20:	LXI	H,TIMER	INR	M	MVI	A,8AH	OUT	0	MVI	A,0FEH	OUT	3	IN	2	MOV	B,A	MVI	A,7FH	OUT	3	IN	2	RLC	RLC	ORI	0FDH	ANA	B	STA	KEYS	MVI	A,88H	OUT	0	XRA	A	OUT	2	DCR	A	OUT	3	CALL	DSPL20	POP	PSW	POP	B	POP	D	POP	H	EI	RETTIMER:	DB	0SZWET:	DB	0KEYS:	DB	0NLEVEL:	DB	0POLDES:	DW	0SPLDES:	DW	0PICDES:	DW	0SHGDES:	DW	0FSHDES:	DB	0FSVDES:	DB	0PADDES:	DB	0OHDAT1:	DS	19OHDAT2:	DS	19OHDAT3:	DS	19OHDATS:	DS	19SKPOP:	DB	0OGRPOP:	DB	0PDLDES	EQU	PODLO0FLOHR1	EQU	OHDAT1ZDOHR1	EQU	OHDAT1+1PLOHR1	EQU	OHDAT1+2SPLOH1	EQU	OHDAT1+4PCOHR1	EQU	OHDAT1+6SHGOH1	EQU	OHDAT1+8FSHOH1	EQU	OHDAT1+10FSVOH1	EQU	OHDAT1+11PADOH1	EQU	OHDAT1+12PDLOH1	EQU	OHDAT1+13VDSOH1	EQU	OHDAT1+15SMSOH1	EQU	OHDAT1+17FLOHR2	EQU	OHDAT2PLOHR2	EQU	OHDAT2+2SPLOH2	EQU	OHDAT2+4FLOHR3	EQU	OHDAT3PLOHR3	EQU	OHDAT3+2SPLOH3	EQU	OHDAT3+4SHGOH2	EQU	OHDAT2+8SHGOH3	EQU	OHDAT3+8PCOHR2	EQU	OHDAT2+6PCOHR3	EQU	OHDAT3+6ZDOHR2	EQU	OHDAT2+1ZDOHR3	EQU	OHDAT3+1LDES1	EQU	GRDESLDES2	EQU	GRDES+96LDES3	EQU	LDES2+96SLDES	EQU	LDES3+96RDES1	EQU	SLDES+96RDES2	EQU	RDES1+96RDES3	EQU	RDES2+96SRDES	EQU	RDES3+96DESV1	EQU	SRDES+96DESV2	EQU	DESV1+96LOHR1	EQU	GROHRLOHR2	EQU	GROHR+96LOHR3	EQU	LOHR2+96SLOHR	EQU	LOHR3+96ROHR1	EQU	SLOHR+96ROHR2	EQU	ROHR1+96ROHR3	EQU	ROHR2+96SROHR	EQU	ROHR3+96OHRV1	EQU	SROHR+96OHRV2	EQU	OHRV1+96STLK	EQU	OHRV2+96VZRV	EQU	GRVZRLDES1S	EQU	SGRAFLDES2S	EQU	SGRAF+144LDES3S	EQU	LDES2S+144SLDESS	EQU	LDES3S+144RDES1S	EQU	SLDESS+144RDES2S	EQU	RDES1S+144RDES3S	EQU	RDES2S+144SRDESS	EQU	RDES3S+144DESV1S	EQU	SRDESS+144DESV2S	EQU	DESV1S+144LOHR1S	EQU	DESV2S+144LOHR2S	EQU	LOHR1S+144LOHR3S	EQU	LOHR2S+144SLOHRS	EQU	LOHR3S+144ROHR1S	EQU	SLOHRS+144ROHR2S	EQU	ROHR1S+144ROHR3S	EQU	ROHR2S+144SROHRS	EQU	ROHR3S+144OHRV1S	EQU	SROHRS+144OHRV2S	EQU	OHRV1S+144STLKS	EQU	OHRV2S+144VZRVS	EQU	STLKS+144MDES1	EQU	GRMASCMDES2	EQU	MDES1+32MDES3	EQU	MDES2+32MDES4	EQU	MDES3+32MDES5	EQU	MDES4+32MDES6	EQU	MDES5+32MDES7	EQU	MDES6+32MDES8	EQU	MDES7+32MDES9	EQU	MDES8+32MDESA	EQU	MDES9+32MOHR1	EQU	MDESA+32MOHR2	EQU	MOHR1+32MOHR3	EQU	MOHR2+32MOHR4	EQU	MOHR3+32MOHR5	EQU	MOHR4+32MOHR6	EQU	MOHR5+32MOHR7	EQU	MOHR6+32MOHR8	EQU	MOHR7+32MOHR9	EQU	MOHR8+32MOHRA	EQU	MOHR9+32MSTLK	EQU	MOHRA+32MDES1S	EQU	MSTLK+32MDES2S	EQU	MDES1S+48MDES3S	EQU	MDES2S+48MDES4S	EQU	MDES3S+48MDES5S	EQU	MDES4S+48MDES6S	EQU	MDES5S+48MDES7S	EQU	MDES6S+48MDES8S	EQU	MDES7S+48MDES9S	EQU	MDES8S+48MDESAS	EQU	MDES9S+48MOHR1S	EQU	MDESAS+48MOHR2S	EQU	MOHR1S+48MOHR3S	EQU	MOHR2S+48MOHR4S	EQU	MOHR3S+48MOHR5S	EQU	MOHR4S+48MOHR6S	EQU	MOHR5S+48MOHR7S	EQU	MOHR6S+48MOHR8S	EQU	MOHR7S+48MOHR9S	EQU	MOHR8S+48MOHRAS	EQU	MOHR9S+48MSTLKS	EQU	MOHRAS+48PCDES: DW LDES1,LDES2,LDES3,SLDES,RDES1,RDES2,RDES3,SRDES,DESV1,DESV2MSDES: DW MDES1,MDES2,MDES3,MDES4,MDES5,MDES6,MDES7,MDES8,MDES9,MDESAMSDESS: DW MDES1S,MDES2S,MDES3S,MDES4S,MDES5S,MDES6S,MDES7S,MDES8S,MDES9S,MDESASPCDESS: DW LDES1S,LDES2S,LDES3S,SLDESS,RDES1S,RDES2S,RDES3S,SRDESS,DESV1S,DESV2SPCOHR: DW LOHR1,LOHR2,LOHR3,SLOHR,ROHR1,ROHR2,ROHR3,SROHR,OHRV1,OHRV2PCOHRS: DW LOHR1S,LOHR2S,LOHR3S,SLOHRS,ROHR1S,ROHR2S,ROHR3S,SROHRS,OHRV1S,OHRV2SMSOHR: DW MOHR1,MOHR2,MOHR3,MOHR4,MOHR5,MOHR6,MOHR7,MOHR8,MOHR9,MOHRAMSOHRS: DW MOHR1S,MOHR2S,MOHR3S,MOHR4S,MOHR5S,MOHR6S,MOHR7S,MOHR8S,MOHR9S,MOHRASETOHR1:	DB 1,2	DW 0,0,ROHR2,100H	DB 0,0,0	DW PODLO1,0,0ETOHR2:	DB 1,20H	DW 0,0,ROHR2,100H	DB 0,0,0	DW PODLO2,0,0ETOHR3:	DB 1,40H	DW 0,0,ROHR2,100H	DB 0,0,0	DW PODLO3,0,0DFRNOW:	DB	0DESBFR:	DS	20DSTZV:	DW 20H,40H,60H,0ZVPOP:	DW 40H,3CH,38H,0ZVUB:ZVINDS:	DW 40H,44H,48H,4CH,0ZVMIN:	DW 60H,1A0H,1C0H,0NACH:	DB	0FDPOP:	DB	0DPOPVD:	DW	0POPOHR:	DW	0VXY1:VYY1:	DB	0VXX1:	DB	0VXY2:VYY2:	DB	0VXX2:	DB	0VS1:	DW	0VS2:	DW	0PUSTO:	REPT	30	DW	0	ENDMPODLO0:	DS	144PODLO1:	DS	144PODLO2:	DS	144PODLO3:	DS	144MINBUF:	DS	288DSPL20:	LDA	KEYS	INR	A	RNZ	LDA	SELJS	DCR	A	JZ	JOYS	DCR	A	JZ	JOYP	XRA	A	OUT	7	IN	7	CMA	LXI	H,TABJU	JMP	JOYS10JOYS:	MVI	A,40H	OUT	5	IN	6	LXI	H,TABJ	CALL	JOYS10	MVI	A,20H	OUT	5	IN	6	LXI	H,TABJ	CALL	JOYS10	RETJOYP:	IN	14	LXI	H,TABJ	CALL	JOYS10	IN	15	LXI	H,TABJ	JMP	JOYS10JOYS10:	MOV	C,A	MVI	B,6	LXI	D,KEYSJOYS12:	MOV	A,C	ANA	M	INX	H	JNZ	JOYS14	LDAX	D	ANA	M	STAX	DJOYS14:	INX	H	DCR	B	JNZ	JOYS12	RETTABJ:	DB 2,0EFH,1,0BFH,4,0DFH,8,7FH,80H,0FDH,40H,0FEHTABJU:	DB 10H,0EFH,40H,0BFH,80H,0DFH,20H,7FH,8,0FDH,4,0FEHSTRKN:	DB	1BH,59H,29H,28H	DB	'Поздравляю вас с успешным'	DB	1BH,59H,2AH,2AH	DB	'выполнением задания !',0