	GLOBAL	@LINE	EXTRN	@PLOTS,@XX,@YY,@XY,@PLTS0,@TABM	EXTRN	@TMSC8@LINE:	PUSH	D	PUSH	B	PUSH	PSW	CALL	LINE10	POP	PSW	POP	B	POP	D	RETLINE10:	MOV	D,A	MOV	A,B	PUSH	PSW	MOV	A,D	ANA	A	JZ	LIN010	DCR	A	JZ	LIN100	DCR	A	JZ	LIN200	POP	PSW	RETLIN200:	PUSH	H	PUSH	B	LXI	H,@XX	MOV	A,B	MOV	D,A	SUB	M	MOV	B,M	JNC	LIN201	CMA	INR	A	MOV	B,DLIN201:	MOV	D,A	LXI	H,@YY	MOV	A,C	SUB	M	JNC	LIN202	CMA	INR	A	MOV	C,MLIN202:	MOV	E,A	INR	E	INR	DLIN204:	MOV	A,B	RRC	RRC	RRC	ANI	1FH	ADI	80H	MOV	H,A	MOV	L,C	PUSH	H	MOV	A,B	ANI	7	LXI	H,@TABM	ADD	L	MOV	L,A	MOV	A,H	ACI	0	MOV	H,A	MOV	H,M	MOV	L,HLIN205:	MOV	A,H	RRC	MOV	H,A	INR	B	DCR	D	JZ	LIN206	JC	LIN206	ORA	L	MOV	L,A	JMP	LIN205LIN206:	MOV	A,L	POP	H	PUSH	B	PUSH	D	MOV	D,E	MOV	E,ALIN207:	PUSH	H	PUSH	D	PUSH	H	MOV	A,L	ANI	7	LXI	H,@TMSC8	ADD	L	MOV	L,A	MOV	A,H	ACI	0	MOV	H,A	MOV	A,E	ANA	M	MOV	E,A	POP	H	CALL	@PLTS0	POP	D	POP	H	DCR	L	DCR	D	JNZ	LIN207	POP	D	POP	B	MOV	A,D	ANA	A	JNZ	LIN204	POP	B	MOV	A,B	STA	@XX	MOV	A,C	STA	@YY	POP	H	POP	PSW	RETLIN010:	POP	PSW	JMP	LIN000LIN100:	POP	PSW	MOV	B,A	PUSH	D	LDA	@YY	MOV	E,A	LDA	@XX	MOV	D,A	PUSH	B	MOV	C,E	MOV	A,B	CALL	LIN000	POP	B	PUSH	B	MOV	A,B	CALL	LIN000	POP	B	PUSH	B	MOV	A,D	CALL	LIN000	MOV	C,E	CALL	LIN000	POP	B	MOV	A,B	STA	@XX	MOV	A,C	STA	@YY	POP	D	RETLIN000:	PUSH	H	PUSH	D	PUSH	B	PUSH	PSW	MVI	B,0	LXI	H,@XX	MOV	D,A	SUB	M	MVI	E,34H	JNC	LIN012	CMA	INR	A	MVI	E,35HLIN012:	STA	LX	MOV	A,E	STA	AX0	STA	AX1	LHLD	@YY	MOV	A,C	SUB	L	MOV	L,A	MOV	A,B	SBB	H	MOV	H,A	MVI	E,23H	JNC	LIN014	CMA	MOV	H,A	MOV	A,L	CMA	MOV	L,A	INX	H	MVI	E,2BHLIN014:	SHLD	LY	MOV	A,E	STA	AY0	STA	AY1	MVI	D,0	LDA	LX	MOV	E,A	DAD	D	MOV	C,L	MOV	B,H	MOV	A,L	ORA	H	JZ	LIN090	LXI	H,0	SHLD	PER0LIN026:	LDA	LX	ANA	A	JZ	LIN016	LHLD	LY	MOV	A,H	ORA	L	JZ	LIN015	LHLD	PER0	XRA	A	XRA	H	JP	LIN018	XCHG	LHLD	LY	DAD	D	SHLD	PER0LIN015:	LDA	SELL	CPI	2	JNZ	LIN019	CALL	LIN0L2	JMP	LIN020LIN019:	ORI	2	CPI	3	JNZ	LIN021	CALL	LIN0L3	JMP	LIN022LIN018:	MVI	D,-1	LDA	LX	CMA	MOV	E,A	INX	D	DAD	D	SHLD	PER0LIN016:	LDA	SELL	CPI	1	JNZ	LIN024	CALL	LIN0L1	JMP	LIN020LIN024:	ORI	1	CPI	3	JNZ	LIN021	CALL	LIN0L3LIN022:	XRA	ALIN021:	STA	SELLLIN020:	DCX	B	MOV	A,B	ORA	C	JNZ	LIN026	LDA	SELL	CPI	1	CZ	LIN0L1	LDA	SELL	CPI	2	CZ	LIN0L2	XRA	A	STA	SELLLIN090:	POP	PSW	POP	B	POP	D	POP	H	RETLIN0L3:	LXI	H,@XXAX0:	INR	M	LHLD	@YYAY0:	INX	H	SHLD	@YY	JMP	LIN0LLIN0L2:	LXI	H,@XXAX1:	INR	M	LHLD	@YY	JMP	LIN0LLIN0L1:	LHLD	@YYAY1:	INX	H	SHLD	@YYLIN0L:	PUSH	B	MOV	C,L	LDA	@XX	CALL	@PLOTS	POP	B	RETPER0:	DW	0LX:	DB	0LY:	DW	0SELL:	DB	0