	ORG	0FB00H
	JMP	BDOS
STEK1:	EQU	0E000H
STEK2:	EQU	0DFA0H
STEK3:	EQU	0DF40H
	JMP	WBOOT
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	CALL	BIOS
	JMP	DYSPLY
DYSINT:	JMP	0
	JMP	DRAW
	JMP	SCROLL
	JMP	CLS
	JMP	CURS
DREXIT:	JMP	0
	DW	ZAGA
	DW	DRTAB
BIOS:	DI
	POP	H
	MOV	A,L
	SUI	3
	MOV	L,A
	MVI	H,0AEH
	SHLD	BIOS02+1
	LDA	3BH
	STA	BSP10
	LDA	15
	STA	3BH
	OUT	10H
	LXI	H,0
	DAD	SP
	SHLD	BIOS10+1
	LXI	SP,STEK1
	EI
BIOS02:	CALL	0
	DI
BIOS10:	LXI	SP,0
	MOV	B,A
	LDA	BSP10
	STA	3BH
	OUT	10H
	MOV	A,B
	EI
	RET
BSP10:	DB	0
WBOOT:	DI
	LXI	SP,0
	LDA	15
	STA	3BH
	OUT	10H
	EI
	CALL	0AE03H
	DI
	LDA	3CH
	STA	3BH
	OUT	10H
	EI
	PCHL
BDOS:	DI
	LDA	15
	STA	3BH
	OUT	10H
	LXI	H,0
	DAD	SP
	SHLD	BDOS10+1
	LXI	SP,STEK2
	EI
	CALL	0A006H
	DI
BDOS10:	LXI	SP,0
	MOV	C,A
	LDA	3CH
	OUT	10H
	STA	3BH
	MOV	A,C
	EI
	RET
SCROLL:	XRA	A
	OUT	10H
	MOV	D,A
	MOV	A,E
	MOV	E,B
SCR08:	MOV	B,E
SCR10:	MOV	M,D
	DCR	L
	MOV	M,D
	DCR	L
	DCR	B
	JNZ	SCR10
	MOV	L,C
	INR	H
	CMP	H
	JNZ	SCR08
	LDA	15
	OUT	10H
	RET
CLS:	XRA	A
	OUT	10H
	LXI	H,0
	DAD	SP
	SHLD	CLS20+1
	LXI	SP,0E000H
	LXI	H,-1024
	LXI	D,0
	LXI	B,1
CLS10:	PUSH	D
	PUSH	D
	PUSH	D
	PUSH	D
	PUSH	D
	PUSH	D
	PUSH	D
	PUSH	D
	DAD	B
	JNC	CLS10
CLS20:	LXI	SP,0
	LDA	15
	OUT	10H
	RET
DYSPLY:	PUSH	H
	PUSH	PSW
	LXI	H,0
	DAD	SP
	LDA	15
	OUT	10H
	LXI	SP,STEK3
	CALL	DYSINT
	SPHL
	LDA	3BH
	OUT	10H
	POP	PSW
	POP	H
	EI
	RET
CURS:	XRA	A
	OUT	10H
	MOV	A,D
	ANA	C
	XRA	M
	MOV	M,A
	INR	H
	MOV	A,D
	ANA	B
	XRA	M
	MOV	M,A
	MVI	A,1FH
	ADD	H
	MOV	H,A
	MOV	A,D
	ANA	C
	XRA	M
	MOV	M,A
	INR	H
	MOV	A,D
	ANA	B
	XRA	M
	MOV	M,A
	LDA	15
	OUT	10H
	RET
ZAGA:	DW 0,0,0,0,DIRB,PARA,CSVA,ALVA
ZAGB:	DW 0,0,0,0,DIRB,PARB,CSVB,ALVB
ZAGC:	DW 0,0,0,0,DIRB,PARC,0,ALVC
PARA:	DW 40
	DB 4,15,0
	DW 187H,127,0C0H,32,8
PARB:	DW 40
	DB 4,15,0
	DW 187H,127,0C0H,32,8
PARC:	DW 8
	DB 3,7,0
	DW 219,63,0C0H,0,0
DIRB:	DS	128
CSVA:	DS	32
CSVB:	DS	32
ALVA:	DS	51
ALVB:	DS	51
ALVC:	DS	33
DRAW:	OUT	10H
	JMP	0
DR0:
DR010:	POP	PSW
	DCX	SP
INV0:	NOP
	MOV	C,A
	XRA	M
	ANI	0E0H
	XRA	M
	MOV	M,A
	XCHG
	MOV	A,C
	RLC
	RLC
	RLC
	XRA	M
	ANI	0E0H
	XRA	M
	MOV	M,A
	XCHG
	DCR	L
	DCR	E
	DCR	B
	JNZ	DR010
DRW10:	MVI	A,20H
	OUT	10H
	JMP	DREXIT
DR1:
DR110:	POP	PSW
	DCX	SP
INV2:	NOP
	MOV	C,A
	RRC
	XRA	M
	ANI	70H
	XRA	M
	MOV	M,A
	XCHG
	MOV	A,C
	RLC
	RLC
	XRA	M
	ANI	70H
	XRA	M
	MOV	M,A
	XCHG
	DCR	E
	DCR	L
	DCR	B
	JNZ	DR110
	JMP	DRW10
DR2:
DR210:	POP	PSW
	DCX	SP
INV4:	NOP
	MOV	C,A
	RRC
	RRC
	XRA	M
	ANI	38H
	XRA	M
	MOV	M,A
	XCHG
	MOV	A,C
	RLC
	XRA	M
	ANI	38H
	XRA	M
	MOV	M,A
	XCHG
	DCR	E
	DCR	L
	DCR	B
	JNZ	DR210
	JMP	DRW10
DR3:
DR310:	POP	PSW
	DCX	SP
INV6:	NOP
	MOV	C,A
	RRC
	RRC
	RRC
	XRA	M
	ANI	1CH
	XRA	M
	MOV	M,A
	XCHG
	MOV	A,C
	XRA	M
	ANI	1CH
	XRA	M
	MOV	M,A
	XCHG
	DCR	E
	DCR	L
	DCR	B
	JNZ	DR310
	JMP	DRW10
DR4:
DR410:	POP	PSW
	DCX	SP
INV8:	NOP
	RRC
	MOV	C,A
	RRC
	RRC
	RRC
	XRA	M
	ANI	0EH
	XRA	M
	MOV	M,A
	XCHG
	MOV	A,C
	XRA	M
	ANI	0EH
	XRA	M
	MOV	M,A
	XCHG
	DCR	E
	DCR	L
	DCR	B
	JNZ	DR410
	JMP	DRW10
DR5:
DR510:	POP	PSW
	DCX	SP
INVA:	NOP
	MOV	C,A
	RLC
	RLC
	RLC
	XRA	M
	ANI	7
	XRA	M
	MOV	M,A
	XCHG
	MOV	A,C
	RRC
	RRC
	XRA	M
	ANI	7
	XRA	M
	MOV	M,A
	XCHG
	DCR	E
	DCR	L
	DCR	B
	JNZ	DR510
	JMP	DRW10
DR6:
DR610:	POP	PSW
	DCX	SP
INVC:	NOP
	RLC
	RLC
	MOV	C,A
	XRA	M
	ANI	3
	XRA	M
	MOV	M,A
	INR	H
	MOV	A,C
	XRA	M
	ANI	80H
	XRA	M
	MOV	M,A
	DCR	H
	XCHG
	MOV	A,C
	RLC
	RLC
	RLC
	MOV	C,A
	XRA	M
	ANI	3
	XRA	M
	MOV	M,A
	INR	H
	MOV	A,C
	XRA	M
	ANI	80H
	XRA	M
	MOV	M,A
	DCR	H
	XCHG
	DCR	E
	DCR	L
	DCR	B
	JNZ	DR610
	JMP	DRW10
DR7:
DR710:	POP	PSW
	DCX	SP
INVE:	NOP
	RLC
	MOV	C,A
	XRA	M
	ANI	1
	XRA	M
	MOV	M,A
	INR	H
	MOV	A,C
	XRA	M
	ANI	0C0H
	XRA	M
	MOV	M,A
	DCR	H
	XCHG
	MOV	A,C
	RLC
	RLC
	RLC
	MOV	C,A
	XRA	M
	ANI	1
	XRA	M
	MOV	M,A
	INR	H
	MOV	A,C
	XRA	M
	ANI	0C0H
	XRA	M
	MOV	M,A
	DCR	H
	XCHG
	DCR	E
	DCR	L
	DCR	B
	JNZ	DR710
	JMP	DRW10
DRTAB:	DW DR0,DR1,DR2,DR3,DR4,DR5,DR6,DR7
INVTAB:	DW INV0,INV2,INV4,INV6,INV8,INVA,INVC,INVE
